(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9596],{9596:(Dt,st,O)=>{"use strict";O.r(st),O.d(st,{GamePage:()=>et});var nt=O(5861),v=O(6895),gt=O(433),k=O(6114),a=(()=>{return(c=a||(a={}))[c.Up=0]="Up",c[c.Down=1]="Down",c[c.Left=2]="Left",c[c.Right=3]="Right",c[c.Stopped=4]="Stopped",a;var c})(),f=(()=>{return(c=f||(f={}))[c.WALL=0]="WALL",c[c.BISCUIT=1]="BISCUIT",c[c.EMPTY=2]="EMPTY",c[c.BLOCK=3]="BLOCK",c[c.PILL=4]="PILL",c[c.LEFT_DOOR=5]="LEFT_DOOR",c[c.RIGHT_DOOR=6]="RIGHT_DOOR",f;var c})();class pt{constructor(n,i){this.width=19,this.height=11,this.cellSize=30,this.winner=!1,this.step=0,this.level=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,4,1,0,0,1,1,1,0,1,1,1,0,0,1,4,1,0],[0,1,0,1,0,0,1,0,1,0,1,0,1,0,0,1,0,1,0],[0,1,0,1,1,1,1,0,1,0,1,0,1,1,1,1,0,1,0],[0,1,0,1,0,0,1,1,1,1,1,1,1,0,0,1,0,1,0],[0,1,0,1,1,1,1,0,0,0,0,0,1,1,1,1,0,1,0],[0,1,1,1,0,0,1,1,1,0,1,1,1,0,0,1,1,1,0],[0,0,0,1,0,0,1,0,1,0,1,0,1,0,0,1,0,0,0],[0,0,0,1,0,0,1,0,1,0,1,0,1,0,0,1,0,0,0],[0,0,0,1,0,0,1,1,1,3,1,1,1,0,0,1,0,0,0],[5,2,1,1,0,0,0,0,3,3,3,0,0,0,0,1,1,2,6],[0,0,0,1,0,0,1,1,1,0,1,1,1,0,0,1,0,0,0],[0,0,0,1,0,0,1,0,1,0,1,0,1,0,0,1,0,0,0],[0,0,0,1,1,1,1,0,1,0,1,0,1,1,1,1,0,0,0],[0,1,1,1,0,0,1,1,1,0,1,1,1,0,0,1,1,1,0],[0,1,0,1,1,1,1,0,0,0,0,0,1,1,1,1,0,1,0],[0,1,0,1,0,0,1,1,1,1,1,1,1,0,0,1,0,1,0],[0,1,0,1,0,0,1,0,1,0,1,0,1,0,0,1,0,1,0],[0,1,0,1,0,0,1,0,1,0,1,0,1,0,0,1,0,1,0],[0,1,4,1,0,0,1,1,1,0,1,1,1,0,0,1,4,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],this.pillSize=10,this.pillBigger=!1,this.context=n,this.game=i}getElement(n,i){return this.level[i][n]}setElement(n,i,o){this.level[i][n]=o}update(){this.step++;let n=!0;for(let i=0;i<this.level.length;i++)for(let o=0;o<this.level[i].length;o++)(this.level[i][o]===f.BISCUIT||this.level[i][o]===f.PILL)&&(n=!1);this.winner=n}draw(){this.drawMaze()}drawMaze(){for(let n=0;n<this.level.length;n++)for(let i=0;i<this.level[n].length;i++)if(this.level[n][i]===f.BISCUIT)this.drawBlock(n,i),this.drawBiscuit(n,i);else if(this.level[n][i]===f.PILL){if(this.game.sound.playingIntro)continue;this.drawBlock(n,i),this.drawPill(n,i)}else this.level[n][i]===f.BLOCK||this.level[n][i]===f.EMPTY?this.drawBlock(n,i):this.level[n][i]===f.WALL?this.drawWall(n,i):(this.level[n][i]===f.LEFT_DOOR||this.level[n][i]===f.RIGHT_DOOR)&&this.drawPortal(n,i)}drawBiscuit(n,i){this.context.fillStyle="whitesmoke",this.context.beginPath(),this.context.arc(30*i+15,30*n+15,5,0,2*Math.PI),this.context.fill()}drawPill(n,i){this.context.fillStyle="yellow",this.context.beginPath(),this.context.arc(30*i+15,30*n+15,this.pillSize,0,2*Math.PI),this.context.fill(),this.step%3==0&&(this.pillSize>10?this.pillBigger=!1:this.pillSize<6&&(this.pillBigger=!0),this.pillBigger?this.pillSize++:this.pillSize--)}drawBlock(n,i){this.context.fillStyle="black",this.context.fillRect(30*i,30*n,30,30)}drawWall(n,i){switch(this.game.settingsService.levelColor){case"green":this.context.fillStyle="green";break;case"pink":this.context.fillStyle="pink";break;case"blue":default:this.context.fillStyle="blue";break;case"purple":this.context.fillStyle="purple";break;case"yellow":this.context.fillStyle="yellow";break;case"orange":this.context.fillStyle="orange";break;case"red":this.context.fillStyle="red"}this.context.fillRect(30*i,30*n,30,30),this.context.fillStyle="black",this.context.fillRect(30*i+5,30*n+5,20,20),i>0&&this.level[n][i-1]===f.WALL&&(this.context.fillStyle="black",this.context.fillRect(30*i,30*n+5,5,20)),i<this.level[n].length-1&&this.level[n][i+1]===f.WALL&&(this.context.fillStyle="black",this.context.fillRect(30*i+25,30*n+5,5,20)),n>0&&this.level[n-1][i]===f.WALL&&(this.context.fillStyle="black",this.context.fillRect(30*i+5,30*n,20,5)),n<this.level.length-1&&this.level[n+1][i]===f.WALL&&(this.context.fillStyle="black",this.context.fillRect(30*i+5,30*n+25,20,5))}drawPortal(n,i){this.context.fillStyle="#B400FF",this.context.fillRect(30*i,30*n,30,30),this.context.fillStyle="black",this.context.fillRect(30*i+5,30*n+5,20,20)}}var p=(()=>{return(c=p||(p={}))[c.BISCUIT=0]="BISCUIT",c[c.PILL=1]="PILL",c[c.LEFT_DOOR=2]="LEFT_DOOR",c[c.RIGHT_DOOR=3]="RIGHT_DOOR",c[c.DEATH=4]="DEATH",c[c.FRUIT=5]="FRUIT",c[c.INTRO=6]="INTRO",c[c.EXRA_LIFE=7]="EXRA_LIFE",p;var c})(),y=(()=>{return(c=y||(y={}))[c.INTRO=0]="INTRO",c[c.POWERUP=1]="POWERUP",c[c.DEATH=2]="DEATH",c[c.GAME_OVER=3]="GAME_OVER",y;var c})();class M{constructor(n){this.settingsService=n,this.playingIntro=!1,this.playingPowerup=!1,this.playingDeath=!1,this.synth=(new Tone.Synth).toDestination()}playSound(n){if(!this.settingsService.muteSound)switch(n){case p.LEFT_DOOR:case p.RIGHT_DOOR:case p.PILL:this.synth.triggerAttackRelease("C5","8n",Tone.now()+.09);break;case p.BISCUIT:this.synth.triggerAttackRelease("D3","64n",Tone.now()+.09);break;case p.FRUIT:this.playMelody(y.POWERUP);break;case p.DEATH:this.playMelody(y.DEATH);break;case p.INTRO:this.playMelody(y.INTRO);break;case p.EXRA_LIFE:this.playMelody(y.POWERUP)}}playMelody(n){if(this.settingsService.muteSound)return;let i=[];switch(n){case y.INTRO:this.playingIntro=!0,i=[{note:"E5",duration:"4n"},{note:"G5",duration:"4n"},{note:"A5",duration:"8n"},{note:"G5",duration:"8n"},{note:"F5",duration:"4n"},{note:"E5",duration:"4n"},{note:"C5",duration:"8n"},{note:"E5",duration:"8n"},{note:"D5",duration:"4n"},{note:"C5",duration:"4n"},{note:"G4",duration:"4n"},{note:"E5",duration:"4n"},{note:"G5",duration:"4n"},{note:"A5",duration:"8n"},{note:"G5",duration:"8n"},{note:"F5",duration:"4n"},{note:"E5",duration:"4n"},{note:"C5",duration:"8n"},{note:"E5",duration:"8n"},{note:"D5",duration:"4n"},{note:"C5",duration:"4n"},{note:"G4",duration:"4n"}];break;case y.POWERUP:this.playingPowerup=!0,i=[{note:"G5",duration:"8n"},{note:"D5",duration:"8n"},{note:"G4",duration:"8n"},{note:"B4",duration:"8n"},{note:"D5",duration:"4n"},{note:"B4",duration:"4n"}];break;case y.DEATH:this.playingDeath=!0,i=[{note:"C4",duration:"16n"},{note:"C3",duration:"8n"},{note:"C2",duration:"8n"},{note:"C1",duration:"4n"},{note:"C0",duration:"2n"}]}const o=(new Tone.Synth).toDestination();let g=0;i.forEach(N=>{const Ct=Tone.now();o.triggerAttackRelease(N.note,N.duration,Ct+.14*g),g++}),setTimeout(()=>{this.playingIntro=!1,this.playingPowerup=!1,this.playingDeath=!1},1e3*i.length*.14)}}class G{constructor(n,i){this.speed=10,this.dead=!0,this.blinking=!1,this.enemySize=6,this.enemyGrow=!0,this.context=n,this.maze=i.maze,this.snake=i.snake,this.game=i,this.direction=a.Right,this.position=this.getPositionOnScreen(9,10),this.reset()}draw(){this.dead?this.maze.step%200==0&&this.reset():this.blinking?(this.context.beginPath(),this.context.fillStyle="rgb(0, 255, 255)",this.context.arc(this.position.x+15,this.position.y+15,this.enemySize,0,2*Math.PI),this.context.fill(),this.maze.step%2==0&&(this.enemySize>10?this.enemyGrow=!1:this.enemySize<6&&(this.enemyGrow=!0),this.enemyGrow?this.enemySize++:this.enemySize--),this.maze.step%150==0&&(this.blinking=!1)):(this.context.beginPath(),this.context.fillStyle="red",this.context.arc(this.position.x+15,this.position.y+15,12,0,2*Math.PI),this.context.fill())}update(){this.dead||(this.move(),this.detectCollissionWithSnake(),this.detectCollissionWithDoor())}detectCollissionWithSnake(){const n=this.position;for(let i=0;i<this.snake.segments.length;i++){const o=this.snake.segments[i];o.x===n.x&&o.y===n.y&&(this.blinking?this.die():this.snake.die())}}detectCollissionWithDoor(){const n=this.position;let i=this.getPositionInMaze(n.x,n.y);if(this.maze.getElement(i.col,i.row)===f.LEFT_DOOR){let o=this.findGameElementPosition(f.RIGHT_DOOR);this.position.x=this.getPositionOnScreen(o.col-1,o.row).x}if(this.maze.getElement(i.col,i.row)===f.RIGHT_DOOR){let o=this.findGameElementPosition(f.LEFT_DOOR);this.position.x=this.getPositionOnScreen(o.col+1,o.row).x}}findGameElementPosition(n){for(let i=0;i<this.maze.level.length;i++)for(let o=0;o<this.maze.level[i].length;o++)if(this.maze.level[i][o]===n)return{col:o,row:i};return{col:9,row:12}}getPositionInMaze(n,i){let o=9,g=12;return(this.direction===a.Right||this.direction===a.Down)&&(o=Math.ceil(n/this.maze.cellSize),g=Math.ceil(i/this.maze.cellSize)),(this.direction===a.Up||this.direction===a.Left)&&(o=Math.floor(n/this.maze.cellSize),g=Math.floor(i/this.maze.cellSize)),{col:o,row:g}}getPositionOnScreen(n,i){return{x:n*this.maze.cellSize,y:i*this.maze.cellSize}}move(){const n=this.position;let i,o;switch(this.direction){case a.Up:i=this.getPositionInMaze(n.x,n.y-this.speed),this.detectWallCollision(i.col,i.row)?this.setRandomDirection():(o=this.getPositionOnScreen(i.col,i.row),this.position={x:o.x,y:n.y-this.speed});break;case a.Down:i=this.getPositionInMaze(n.x,n.y+this.speed),this.detectWallCollision(i.col,i.row)?this.setRandomDirection():(o=this.getPositionOnScreen(i.col,i.row),this.position={x:o.x,y:n.y+this.speed});break;case a.Left:i=this.getPositionInMaze(n.x-this.speed,n.y),this.detectWallCollision(i.col,i.row)?this.setRandomDirection():(o=this.getPositionOnScreen(i.col,i.row),this.position={x:n.x-this.speed,y:o.y});break;case a.Right:i=this.getPositionInMaze(n.x+this.speed,n.y),this.detectWallCollision(i.col,i.row)?this.setRandomDirection():(o=this.getPositionOnScreen(i.col,i.row),this.position={x:n.x+this.speed,y:o.y})}this.maze.step%20==0&&this.setRandomDirection(),this.maze.step%30==0&&this.updateDirection()}updateDirection(){let n=this.snake.segments[0];if(!n)return;const i=n.x-this.position.x,o=n.y-this.position.y;Math.sqrt(i*i+o*o),this.direction=this.blinking?i>0&&Math.abs(i)>Math.abs(o)?a.Right:i<0&&Math.abs(i)>Math.abs(o)?a.Left:o>0?a.Down:a.Up:i<0&&Math.abs(i)>Math.abs(o)?a.Right:i>0&&Math.abs(i)>Math.abs(o)?a.Left:o<0?a.Down:a.Up}setRandomDirection(){switch(Math.floor(4*Math.random())){case 0:this.direction=a.Up;break;case 1:this.direction=a.Down;break;case 2:this.direction=a.Left;break;case 3:this.direction=a.Right}}detectWallCollision(n,i){switch(this.direction){case a.Up:case a.Down:case a.Left:case a.Right:if(this.maze.getElement(n,i)===f.WALL)return!0}return!1}die(){this.game.sound.playSound(p.DEATH),this.dead=!0,this.game.updateScore(20)}reset(){this.blinking=!1,this.dead=!1,this.position=this.getPositionOnScreen(9,10)}}class w{constructor(n,i){this.segments=[],this.speed=10,this.dead=!0,this.color=0,this.particles=[],this.context=n,this.maze=i.maze,this.game=i,this.direction=a.Stopped,this.nextDirection=a.Stopped,this.reset()}draw(){if(0!==this.segments.length)for(let n=this.segments.length-1;n>=0;n--){const i=this.segments[n];if(this.context.beginPath(),0===n)switch(this.game.settingsService.snakeColor){case"red":this.context.fillStyle="red";break;case"blue":default:this.context.fillStyle="blue";break;case"green":this.context.fillStyle="darkgreen";break;case"yellow":this.context.fillStyle="yellow";break;case"purple":this.context.fillStyle="purple";break;case"orange":this.context.fillStyle="orange";break;case"pink":this.context.fillStyle="pink"}else if(this.game.enemy.blinking)this.color+=1,this.color>255&&(this.color=0),this.context.fillStyle=`hsl(${this.color}, 100%, 50%)`;else switch(this.game.settingsService.snakeColor){case"red":this.context.fillStyle="rgba(255, 0, 0, 0.8)";break;case"blue":this.context.fillStyle="rgba(0, 0, 255, 0.5)";break;case"green":this.context.fillStyle="rgba(0, 128, 0, 0.5)";break;case"yellow":this.context.fillStyle="rgba(255, 255, 0, 0.5)";break;case"purple":this.context.fillStyle="rgba(128, 0, 128, 0.5)";break;case"orange":this.context.fillStyle="rgba(255, 165, 0, 0.5)";break;case"pink":this.context.fillStyle="rgba(255, 192, 203, 0.5)";break;default:this.context.fillStyle="rgb(203, 195, 227)"}this.context.arc(i.x+15,i.y+15,10,0,2*Math.PI),this.context.fill()}this.drawParticles()}createParticles(){this.particles=[];for(let n=0;n<25;n++)this.particles.push({x:this.segments[0].x,y:this.segments[0].y,size:8*Math.random()+2,speedX:5*Math.random()*2-5,speedY:5*Math.random()*2-5,color:`rgb(${255*Math.random()}, ${255*Math.random()}, ${255*Math.random()})`})}drawParticles(){if(this.game.enemy.blinking)for(let n=0;n<this.particles.length;n++){const i=this.particles[n];this.context.fillStyle=i.color,this.context.fillRect(i.x,i.y,i.size,i.size),i.x+=i.speedX,i.y+=i.speedY}}update(){0!==this.segments.length&&!1===this.game.sound.playingIntro&&!1===this.game.sound.playingDeath&&!1===this.game.sound.playingPowerup&&(this.move(),this.detectCollissionWithBiscuit(),this.detectCollissionWithPill(),this.detectCollissionWithTail(),this.detectCollissionWithDoor())}detectCollissionWithTail(){if(!this.game.enemy.blinking){const n=this.segments[0];this.segments.length>2&&this.segments.filter(i=>i.x===n.x&&i.y===n.y).length>1&&this.die()}}detectCollissionWithDoor(){const n=this.segments[0];let i=this.getPositionInMaze(this.direction,n.x,n.y);if(this.maze.getElement(i.col,i.row)===f.LEFT_DOOR){this.game.sound.playSound(p.LEFT_DOOR);let o=this.findGameElementPositionInMaze(f.RIGHT_DOOR);this.segments[0].x=this.getPositionOnScreen(o.col-1,o.row).x}if(this.maze.getElement(i.col,i.row)===f.RIGHT_DOOR){this.game.sound.playSound(p.RIGHT_DOOR);let o=this.findGameElementPositionInMaze(f.LEFT_DOOR);this.segments[0].x=this.getPositionOnScreen(o.col+1,o.row).x}}findGameElementPositionInMaze(n){for(let i=0;i<this.maze.level.length;i++)for(let o=0;o<this.maze.level[i].length;o++)if(this.maze.level[i][o]===n)return{col:o,row:i};return{col:9,row:12}}detectCollissionWithBiscuit(){const n=this.segments[0];let i=this.getPositionInMaze(this.direction,n.x,n.y);this.maze.getElement(i.col,i.row)===f.BISCUIT&&(this.game.sound.playSound(p.BISCUIT),this.game.updateScore(1),this.maze.setElement(i.col,i.row,f.EMPTY),this.grow())}detectCollissionWithPill(){const n=this.segments[0];let i=this.getPositionInMaze(this.direction,n.x,n.y);this.maze.getElement(i.col,i.row)===f.PILL&&(this.game.sound.playSound(p.PILL),this.game.updateScore(10),this.maze.setElement(i.col,i.row,f.EMPTY),this.shrink(),this.createParticles(),this.game.enemy.blinking=!0,this.game.enemy2.blinking=!0,this.maze.step=0)}getPositionInMaze(n,i,o){let g=9,N=12;return 0!==this.segments.length?((n===a.Right||n===a.Down)&&(g=Math.ceil(i/this.maze.cellSize),N=Math.ceil(o/this.maze.cellSize)),(n===a.Up||n===a.Left)&&(g=Math.floor(i/this.maze.cellSize),N=Math.floor(o/this.maze.cellSize)),{col:g,row:N}):{col:g,row:N}}getPositionOnScreen(n,i){return 0!==this.segments.length?{x:n*this.maze.cellSize,y:i*this.maze.cellSize}:{x:9,y:12}}move(){const n=this.segments[0];let i,o;switch(this.nextDirection){case a.Up:i=this.getPositionInMaze(this.nextDirection,n.x,n.y-this.speed),this.detectWallCollision(i.col,i.row)||(this.direction=a.Up);break;case a.Down:i=this.getPositionInMaze(this.nextDirection,n.x,n.y+this.speed),this.detectWallCollision(i.col,i.row)||(this.direction=a.Down);break;case a.Left:i=this.getPositionInMaze(this.nextDirection,n.x-this.speed,n.y),this.detectWallCollision(i.col,i.row)||(this.direction=a.Left);break;case a.Right:i=this.getPositionInMaze(this.nextDirection,n.x+this.speed,n.y),this.detectWallCollision(i.col,i.row)||(this.direction=a.Right)}switch(this.direction){case a.Up:i=this.getPositionInMaze(this.direction,n.x,n.y-this.speed),this.detectWallCollision(i.col,i.row)||(o=this.getPositionOnScreen(i.col,i.row),this.segments.unshift({x:o.x,y:n.y-this.speed}),this.segments.pop());break;case a.Down:i=this.getPositionInMaze(this.direction,n.x,n.y+this.speed),this.detectWallCollision(i.col,i.row)||(o=this.getPositionOnScreen(i.col,i.row),this.segments.unshift({x:o.x,y:n.y+this.speed}),this.segments.pop());break;case a.Left:i=this.getPositionInMaze(this.direction,n.x-this.speed,n.y),this.detectWallCollision(i.col,i.row)||(o=this.getPositionOnScreen(i.col,i.row),this.segments.unshift({x:n.x-this.speed,y:o.y}),this.segments.pop());break;case a.Right:i=this.getPositionInMaze(this.direction,n.x+this.speed,n.y),this.detectWallCollision(i.col,i.row)||(o=this.getPositionOnScreen(i.col,i.row),this.segments.unshift({x:n.x+this.speed,y:o.y}),this.segments.pop())}}detectWallCollision(n,i){return this.maze.getElement(n,i)===f.WALL}grow(){this.segments.push(this.segments[this.segments.length-1])}shrink(){this.segments=this.segments.slice(0,3)}die(){this.dead=!0,this.game.lives--,this.reset()}reset(){this.dead=!1,this.segments=[],this.segments.push({x:9*this.maze.cellSize,y:16*this.maze.cellSize}),this.game.sound.playSound(p.INTRO)}}var J=O(5386);class mt{constructor(n,i){this.speed=10,this.score=0,this.dead=!0,this.context=n,this.maze=i.maze,this.snake=i.snake,this.game=i,this.direction=a.Right,this.position=this.getPositionOnScreen(0,10),this.reset()}draw(){this.dead||(this.context.font="30px Arial",this.context.fillText(this.game.levels[this.game.level-1%this.game.levels.length],this.position.x,this.position.y+30))}update(){this.dead||(this.move(),this.detectCollissionWithSnake(),this.detectCollissionWithDoor())}detectCollissionWithSnake(){const n=this.position;for(let i=0;i<this.snake.segments.length;i++){const o=this.snake.segments[i];o.x===n.x&&o.y===n.y&&this.die()}}detectCollissionWithDoor(){const n=this.position;let i=this.getPositionInMaze(n.x,n.y);if(this.maze.getElement(i.col,i.row)===f.LEFT_DOOR){let o=this.findGameElementPosition(f.RIGHT_DOOR);this.position.x=this.getPositionOnScreen(o.col-1,o.row).x}if(this.maze.getElement(i.col,i.row)===f.RIGHT_DOOR){let o=this.findGameElementPosition(f.LEFT_DOOR);this.position.x=this.getPositionOnScreen(o.col+1,o.row).x}}findGameElementPosition(n){for(let i=0;i<this.maze.level.length;i++)for(let o=0;o<this.maze.level[i].length;o++)if(this.maze.level[i][o]===n)return{col:o,row:i};return{col:9,row:12}}getPositionInMaze(n,i){let o=9,g=12;return(this.direction===a.Right||this.direction===a.Down)&&(o=Math.ceil(n/this.maze.cellSize),g=Math.ceil(i/this.maze.cellSize)),(this.direction===a.Up||this.direction===a.Left)&&(o=Math.floor(n/this.maze.cellSize),g=Math.floor(i/this.maze.cellSize)),{col:o,row:g}}getPositionOnScreen(n,i){return{x:n*this.maze.cellSize,y:i*this.maze.cellSize}}move(){const n=this.position;let i,o;switch(this.direction){case a.Up:i=this.getPositionInMaze(n.x,n.y-this.speed),this.detectWallCollision(i.col,i.row)?this.setRandomDirection():(o=this.getPositionOnScreen(i.col,i.row),this.position={x:o.x,y:n.y-this.speed});break;case a.Down:i=this.getPositionInMaze(n.x,n.y+this.speed),this.detectWallCollision(i.col,i.row)?this.setRandomDirection():(o=this.getPositionOnScreen(i.col,i.row),this.position={x:o.x,y:n.y+this.speed});break;case a.Left:i=this.getPositionInMaze(n.x-this.speed,n.y),this.detectWallCollision(i.col,i.row)?this.setRandomDirection():(o=this.getPositionOnScreen(i.col,i.row),this.position={x:n.x-this.speed,y:o.y});break;case a.Right:i=this.getPositionInMaze(n.x+this.speed,n.y),this.detectWallCollision(i.col,i.row)?this.setRandomDirection():(o=this.getPositionOnScreen(i.col,i.row),this.position={x:n.x+this.speed,y:o.y})}this.maze.step%20==0&&this.setRandomDirection(),this.maze.step%30==0&&this.updateDirection()}updateDirection(){let n=this.snake.segments[0];if(!n)return;const i=n.x-this.position.x,o=n.y-this.position.y;Math.sqrt(i*i+o*o),this.direction=i<0&&Math.abs(i)>Math.abs(o)?a.Right:i>0&&Math.abs(i)>Math.abs(o)?a.Left:o<0?a.Down:a.Up}setRandomDirection(){switch(Math.floor(4*Math.random())){case 0:this.direction=a.Up;break;case 1:this.direction=a.Down;break;case 2:this.direction=a.Left;break;case 3:this.direction=a.Right}}detectWallCollision(n,i){switch(this.direction){case a.Up:case a.Down:case a.Left:case a.Right:if(this.maze.getElement(n,i)===f.WALL)return!0}return!1}die(){this.game.sound.playSound(p.FRUIT),this.game.updateScore(50*this.game.level),this.dead=!0}reset(){this.dead=!1,this.position=this.getPositionOnScreen(0,10)}}var E=O(2598),H=O(8570),l=O(8256),vt=O(452);const $=["canvas"];function j(c,n){1&c&&(l.TgZ(0,"span"),l._uU(1,"\u{1f40d}"),l.qZA())}function Tt(c,n){1&c&&(l.TgZ(0,"div",19),l._uU(1,"Game Over"),l.qZA())}function L(c,n){1&c&&(l.TgZ(0,"div",20),l._uU(1,"You Win!"),l.qZA())}function K(c,n){1&c&&(l.TgZ(0,"div",20),l._uU(1,"Get Ready!"),l.qZA())}function Y(c,n){1&c&&(l.TgZ(0,"div",20),l._uU(1,"Bonus!"),l.qZA())}function tt(c,n){1&c&&(l.TgZ(0,"div",21),l._uU(1,"PAUSED"),l.qZA())}const yt=function(){return[]};let et=(()=>{class c{constructor(i,o){this.router=i,this.settingsService=o,this.title="SnakeMan",this.score=0,this.newLifeScore=0,this.highScore=parseInt(localStorage.getItem("snakeman-highscore")||"0"),this.paused=!1,this.gameOver=!1,this.winner=!1,this.lives=3,this.levels=["\u{1f352}","\u{1f353}","\u{1f34a}","\u{1f34e}","\u{1f347}","\u{1f351}","\u{1f349}","\u{1f34c}","\u{1f968}","\u{1f511}"],this.level=1,this.debugString="",this.showSettings=!1,this.router.events.subscribe(g=>{g instanceof E.OD&&"/game"!==g.url&&(clearInterval(this.timer),this.timer=null,this.paused=!0)}),this.sound=new M(this.settingsService)}ngAfterViewInit(){var i;this.context=null===(i=this.canvas)||void 0===i?void 0:i.nativeElement.getContext("2d"),this.context&&(this.gameOver=!0,this.maze=new pt(this.context,this),this.snake=new w(this.context,this),this.enemy=new G(this.context,this),this.enemy2=new G(this.context,this),this.fruit=new mt(this.context,this),this.draw(),this.setupKeyboardEvents())}startGame(){this.paused?this.pauseGame():this.context&&(this.maze=new pt(this.context,this),this.snake=new w(this.context,this),this.enemy=new G(this.context,this),this.enemy2=new G(this.context,this),this.fruit=new mt(this.context,this),this.hideText(),this.timer&&clearInterval(this.timer),this.timer=setInterval(()=>{this.update(),this.draw()},60))}hideText(){this.paused=!1,this.gameOver=!1,this.winner=!1}startStopTimer(){this.timer?(clearInterval(this.timer),this.timer=null):this.timer=setInterval(()=>{this.draw(),this.update()},60)}pauseGame(){this.gameOver||(this.startStopTimer(),this.paused=!this.paused)}draw(){this.maze.draw(),this.snake.draw(),this.enemy.draw(),this.enemy2.draw(),this.fruit.draw()}update(){this.sound.playingIntro||(this.snake.update(),this.maze.update(),this.enemy.update(),this.enemy2.update(),this.fruit.update(),this.freeLife(),this.lives<1&&(this.gameOver=!0,this.startStopTimer(),this.recordHighScore(),this.showAd()),this.maze.winner&&(this.level++,this.startGame()))}freeLife(){this.newLifeScore>=1e3&&(this.lives++,this.newLifeScore=0,this.sound.playSound(p.EXRA_LIFE))}updateScore(i){this.score=this.score+i,this.newLifeScore=this.newLifeScore+i}recordHighScore(){this.score>this.highScore&&(this.highScore=this.score,localStorage.setItem("snakeman-highscore",this.score.toString()))}showAd(){return(0,nt.Z)(function*(){H.TQ.addListener(H.md.Loaded,o=>{}),yield H.TQ.prepareInterstitial({adId:"ca-app-pub-8100251904655600/8473077653",isTesting:!0}),yield H.TQ.showInterstitial()})()}setupKeyboardEvents(){document.addEventListener("keydown",o=>{switch(o.key){case"ArrowUp":case"w":(!this.enemy.blinking&&this.snake.direction!==a.Down||1===this.snake.segments.length)&&(this.snake.nextDirection=a.Up),this.enemy.blinking&&(this.snake.nextDirection=a.Up);break;case"ArrowDown":case"s":(!this.enemy.blinking&&this.snake.direction!==a.Up||1===this.snake.segments.length)&&(this.snake.nextDirection=a.Down),this.enemy.blinking&&(this.snake.nextDirection=a.Down);break;case"ArrowLeft":case"a":(!this.enemy.blinking&&this.snake.direction!==a.Right||1===this.snake.segments.length)&&(this.snake.nextDirection=a.Left),this.enemy.blinking&&(this.snake.nextDirection=a.Left);break;case"ArrowRight":case"d":(!this.enemy.blinking&&this.snake.direction!==a.Left||1===this.snake.segments.length)&&(this.snake.nextDirection=a.Right),this.enemy.blinking&&(this.snake.nextDirection=a.Right);break;case"p":this.pauseGame()}});let i=document.getElementById("pad");this.hammer=new J.Manager(i),this.hammer.add(new J.Swipe({direction:J.DIRECTION_ALL,threshold:3,velocity:.2})),this.hammer.on("swipeleft",()=>{(!this.enemy.blinking&&this.snake.direction!==a.Right||1===this.snake.segments.length)&&(this.snake.nextDirection=a.Left),this.enemy.blinking&&(this.snake.nextDirection=a.Left)}),this.hammer.on("swiperight",()=>{(!this.enemy.blinking&&this.snake.direction!==a.Left||1===this.snake.segments.length)&&(this.snake.nextDirection=a.Right),this.enemy.blinking&&(this.snake.nextDirection=a.Right)}),this.hammer.on("swipeup",()=>{(!this.enemy.blinking&&this.snake.direction!==a.Down||1===this.snake.segments.length)&&(this.snake.nextDirection=a.Up),this.enemy.blinking&&(this.snake.nextDirection=a.Up)}),this.hammer.on("swipedown",()=>{(!this.enemy.blinking&&this.snake.direction!==a.Up||1===this.snake.segments.length)&&(this.snake.nextDirection=a.Down),this.enemy.blinking&&(this.snake.nextDirection=a.Down)})}settings(){this.showSettings=!this.showSettings}}return c.\u0275fac=function(i){return new(i||c)(l.Y36(E.F0),l.Y36(vt.g))},c.\u0275cmp=l.Xpm({type:c,selectors:[["app-game"]],viewQuery:function(i,o){if(1&i&&l.Gf($,7),2&i){let g;l.iGM(g=l.CRH())&&(o.canvas=g.first)}},standalone:!0,features:[l.jDz],decls:40,vars:13,consts:[[3,"translucent"],["slot","start"],[1,"title"],["id","pad","scrollY","false",3,"fullscreen"],[1,"score"],[1,"left"],["size","auto",1,"left"],[1,"right"],[3,"click"],["name","play-outline"],["name","pause-outline"],["size","auto"],["width","570","height","630"],["canvas",""],[4,"ngFor","ngForOf"],["size","auto",1,"center"],["class","red-text",4,"ngIf"],["class","green-text",4,"ngIf"],["class","white-text",4,"ngIf"],[1,"red-text"],[1,"green-text"],[1,"white-text"]],template:function(i,o){1&i&&(l.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),l._UZ(3,"ion-menu-button"),l.qZA(),l.TgZ(4,"ion-title",2),l._uU(5,"SnakeMan"),l.qZA()()(),l.TgZ(6,"ion-content",3)(7,"ion-grid")(8,"ion-row",4)(9,"ion-col",5),l._uU(10,"SCORE"),l._UZ(11,"br"),l._uU(12),l.qZA(),l.TgZ(13,"ion-col",6),l._uU(14,"HIGH SCORE"),l._UZ(15,"br"),l._uU(16),l.qZA(),l.TgZ(17,"ion-col",7)(18,"button",8),l.NdJ("click",function(){return o.score=0,o.level=1,o.lives=3,o.startGame()}),l._UZ(19,"ion-icon",9),l.qZA(),l.TgZ(20,"button",8),l.NdJ("click",function(){return o.pauseGame()}),l._UZ(21,"ion-icon",10),l.qZA()()(),l.TgZ(22,"ion-row",11)(23,"ion-col"),l._UZ(24,"canvas",12,13),l.qZA()(),l.TgZ(26,"ion-row")(27,"ion-col",5),l.YNc(28,j,2,0,"span",14),l.qZA(),l.TgZ(29,"ion-col",15),l.YNc(30,Tt,2,0,"div",16),l.YNc(31,L,2,0,"div",17),l.YNc(32,K,2,0,"div",17),l.YNc(33,Y,2,0,"div",17),l.YNc(34,tt,2,0,"div",18),l.qZA(),l.TgZ(35,"ion-col",7)(36,"span"),l._uU(37),l.qZA(),l.TgZ(38,"span"),l._uU(39),l.qZA()()()()()),2&i&&(l.Q6J("translucent",!0),l.xp6(6),l.Q6J("fullscreen",!0),l.xp6(6),l.Oqu(o.score),l.xp6(4),l.Oqu(o.highScore),l.xp6(12),l.Q6J("ngForOf",l.DdM(12,yt).constructor(o.lives)),l.xp6(2),l.Q6J("ngIf",o.gameOver),l.xp6(1),l.Q6J("ngIf",o.winner),l.xp6(1),l.Q6J("ngIf",o.sound.playingIntro&&!o.gameOver),l.xp6(1),l.Q6J("ngIf",o.sound.playingPowerup),l.xp6(1),l.Q6J("ngIf",o.paused),l.xp6(3),l.Oqu(o.levels[o.level-1%o.levels.length]),l.xp6(2),l.Oqu(o.level))},dependencies:[k.Pc,k.Sm,k.wI,k.W2,k.jY,k.Gu,k.gu,k.fG,k.Nd,k.wd,k.sr,v.ez,v.sg,v.O5,gt.u5],styles:["ion-grid[_ngcontent-%COMP%]{overflow-y:hidden;max-width:380px}canvas[_ngcontent-%COMP%]{width:100%;height:auto;max-width:570px;max-height:660px}.left[_ngcontent-%COMP%]{text-align:left}.center[_ngcontent-%COMP%]{text-align:center}.right[_ngcontent-%COMP%]{text-align:right}.title[_ngcontent-%COMP%]{font-size:28px;text-shadow:0 0 2px #00ff00,0 0 5px #00ff00,0 0 7px #00ff00,0 0 10px #00ff00,0 0 12px #00ff00}.white-text[_ngcontent-%COMP%]{color:#fff}.red-text[_ngcontent-%COMP%]{color:red}.green-text[_ngcontent-%COMP%]{color:green}button[_ngcontent-%COMP%]{font-size:26px;background-color:#000;color:#fff;border:1px solid white;border-radius:5px;padding:2px;margin-left:10px;width:44px;cursor:pointer}.score[_ngcontent-%COMP%]{font-size:18px;padding-top:5px;color:#fff}.lives[_ngcontent-%COMP%], .bonus[_ngcontent-%COMP%]{font-size:20px;padding-top:5px}"]}),c})()},5386:(Dt,st,O)=>{var nt;!function(v,gt,k,a){"use strict";var w,f=["","webkit","Moz","MS","ms","o"],pt=gt.createElement("div"),p="function",y=Math.round,M=Math.abs,G=Date.now;function rt(t,e,s){return setTimeout(H(t,s),e)}function F(t,e,s){return!!Array.isArray(t)&&(_(t,s[e],s),!0)}function _(t,e,s){var r;if(t)if(t.forEach)t.forEach(e,s);else if(t.length!==a)for(r=0;r<t.length;)e.call(s,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(s,t[r],r,t)}function X(t,e,s){var r="DEPRECATED METHOD: "+e+"\n"+s+" AT \n";return function(){var h=new Error("get-stack-trace"),u=h&&h.stack?h.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",d=v.console&&(v.console.warn||v.console.log);return d&&d.call(v.console,r,u),t.apply(this,arguments)}}w="function"!=typeof Object.assign?function(e){if(e===a||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(e),r=1;r<arguments.length;r++){var h=arguments[r];if(h!==a&&null!==h)for(var u in h)h.hasOwnProperty(u)&&(s[u]=h[u])}return s}:Object.assign;var J=X(function(e,s,r){for(var h=Object.keys(s),u=0;u<h.length;)(!r||r&&e[h[u]]===a)&&(e[h[u]]=s[h[u]]),u++;return e},"extend","Use `assign`."),mt=X(function(e,s){return J(e,s,!0)},"merge","Use `assign`.");function E(t,e,s){var h,r=e.prototype;(h=t.prototype=Object.create(r)).constructor=t,h._super=r,s&&w(h,s)}function H(t,e){return function(){return t.apply(e,arguments)}}function l(t,e){return typeof t==p?t.apply(e&&e[0]||a,e):t}function vt(t,e){return t===a?e:t}function $(t,e,s){_(K(e),function(r){t.addEventListener(r,s,!1)})}function j(t,e,s){_(K(e),function(r){t.removeEventListener(r,s,!1)})}function Tt(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function L(t,e){return t.indexOf(e)>-1}function K(t){return t.trim().split(/\s+/g)}function Y(t,e,s){if(t.indexOf&&!s)return t.indexOf(e);for(var r=0;r<t.length;){if(s&&t[r][s]==e||!s&&t[r]===e)return r;r++}return-1}function tt(t){return Array.prototype.slice.call(t,0)}function yt(t,e,s){for(var r=[],h=[],u=0;u<t.length;){var d=e?t[u][e]:t[u];Y(h,d)<0&&r.push(t[u]),h[u]=d,u++}return s&&(r=e?r.sort(function(P,I){return P[e]>I[e]}):r.sort()),r}function et(t,e){for(var s,r,h=e[0].toUpperCase()+e.slice(1),u=0;u<f.length;){if((r=(s=f[u])?s+h:e)in t)return r;u++}return a}var c=1;function i(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||v}var g="ontouchstart"in v,N=et(v,"PointerEvent")!==a,Ct=g&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),ot="touch",Rt="mouse",ce=25,x=1,q=2,m=4,S=8,Pt=1,at=2,ht=4,lt=8,ct=16,R=at|ht,B=lt|ct,Yt=R|B,Zt=["x","y"],Et=["clientX","clientY"];function b(t,e){var s=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(r){l(t.options.enable,[t])&&s.handler(r)},this.init()}function fe(t,e,s){var r=s.pointers.length,h=s.changedPointers.length,u=e&x&&r-h==0,d=e&(m|S)&&r-h==0;s.isFirst=!!u,s.isFinal=!!d,u&&(t.session={}),s.eventType=e,function de(t,e){var s=t.session,r=e.pointers,h=r.length;s.firstInput||(s.firstInput=Xt(e)),h>1&&!s.firstMultiple?s.firstMultiple=Xt(e):1===h&&(s.firstMultiple=!1);var u=s.firstInput,d=s.firstMultiple,T=d?d.center:u.center,P=e.center=qt(r);e.timeStamp=G(),e.deltaTime=e.timeStamp-u.timeStamp,e.angle=zt(T,P),e.distance=xt(T,P),function ge(t,e){var s=e.center,r=t.offsetDelta||{},h=t.prevDelta||{},u=t.prevInput||{};(e.eventType===x||u.eventType===m)&&(h=t.prevDelta={x:u.deltaX||0,y:u.deltaY||0},r=t.offsetDelta={x:s.x,y:s.y}),e.deltaX=h.x+(s.x-r.x),e.deltaY=h.y+(s.y-r.y)}(s,e),e.offsetDirection=Vt(e.deltaX,e.deltaY);var I=Bt(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=I.x,e.overallVelocityY=I.y,e.overallVelocity=M(I.x)>M(I.y)?I.x:I.y,e.scale=d?function ve(t,e){return xt(e[0],e[1],Et)/xt(t[0],t[1],Et)}(d.pointers,r):1,e.rotation=d?function me(t,e){return zt(e[1],e[0],Et)+zt(t[1],t[0],Et)}(d.pointers,r):0,e.maxPointers=s.prevInput?e.pointers.length>s.prevInput.maxPointers?e.pointers.length:s.prevInput.maxPointers:e.pointers.length,function pe(t,e){var h,u,d,T,s=t.lastInterval||e,r=e.timeStamp-s.timeStamp;if(e.eventType!=S&&(r>ce||s.velocity===a)){var P=e.deltaX-s.deltaX,I=e.deltaY-s.deltaY,A=Bt(r,P,I);u=A.x,d=A.y,h=M(A.x)>M(A.y)?A.x:A.y,T=Vt(P,I),t.lastInterval=e}else h=s.velocity,u=s.velocityX,d=s.velocityY,T=s.direction;e.velocity=h,e.velocityX=u,e.velocityY=d,e.direction=T}(s,e);var A=t.element;Tt(e.srcEvent.target,A)&&(A=e.srcEvent.target),e.target=A}(t,s),t.emit("hammer.input",s),t.recognize(s),t.session.prevInput=s}function Xt(t){for(var e=[],s=0;s<t.pointers.length;)e[s]={clientX:y(t.pointers[s].clientX),clientY:y(t.pointers[s].clientY)},s++;return{timeStamp:G(),pointers:e,center:qt(e),deltaX:t.deltaX,deltaY:t.deltaY}}function qt(t){var e=t.length;if(1===e)return{x:y(t[0].clientX),y:y(t[0].clientY)};for(var s=0,r=0,h=0;h<e;)s+=t[h].clientX,r+=t[h].clientY,h++;return{x:y(s/e),y:y(r/e)}}function Bt(t,e,s){return{x:e/t||0,y:s/t||0}}function Vt(t,e){return t===e?Pt:M(t)>=M(e)?t<0?at:ht:e<0?lt:ct}function xt(t,e,s){s||(s=Zt);var r=e[s[0]]-t[s[0]],h=e[s[1]]-t[s[1]];return Math.sqrt(r*r+h*h)}function zt(t,e,s){return s||(s=Zt),180*Math.atan2(e[s[1]]-t[s[1]],e[s[0]]-t[s[0]])/Math.PI}b.prototype={handler:function(){},init:function(){this.evEl&&$(this.element,this.evEl,this.domHandler),this.evTarget&&$(this.target,this.evTarget,this.domHandler),this.evWin&&$(i(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&j(this.element,this.evEl,this.domHandler),this.evTarget&&j(this.target,this.evTarget,this.domHandler),this.evWin&&j(i(this.element),this.evWin,this.domHandler)}};var Te={mousedown:x,mousemove:q,mouseup:m},ye="mousedown",Pe="mousemove mouseup";function It(){this.evEl=ye,this.evWin=Pe,this.pressed=!1,b.apply(this,arguments)}E(It,b,{handler:function(e){var s=Te[e.type];s&x&&0===e.button&&(this.pressed=!0),s&q&&1!==e.which&&(s=m),this.pressed&&(s&m&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[e],changedPointers:[e],pointerType:Rt,srcEvent:e}))}});var Ee={pointerdown:x,pointermove:q,pointerup:m,pointercancel:S,pointerout:S},xe={2:ot,3:"pen",4:Rt,5:"kinect"},Qt="pointerdown",Jt="pointermove pointerup pointercancel";function At(){this.evEl=Qt,this.evWin=Jt,b.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}v.MSPointerEvent&&!v.PointerEvent&&(Qt="MSPointerDown",Jt="MSPointerMove MSPointerUp MSPointerCancel"),E(At,b,{handler:function(e){var s=this.store,r=!1,h=e.type.toLowerCase().replace("ms",""),u=Ee[h],d=xe[e.pointerType]||e.pointerType,T=d==ot,P=Y(s,e.pointerId,"pointerId");u&x&&(0===e.button||T)?P<0&&(s.push(e),P=s.length-1):u&(m|S)&&(r=!0),!(P<0)&&(s[P]=e,this.callback(this.manager,u,{pointers:s,changedPointers:[e],pointerType:d,srcEvent:e}),r&&s.splice(P,1))}});var Ie={touchstart:x,touchmove:q,touchend:m,touchcancel:S},Se="touchstart",Oe="touchstart touchmove touchend touchcancel";function $t(){this.evTarget=Se,this.evWin=Oe,this.started=!1,b.apply(this,arguments)}function we(t,e){var s=tt(t.touches),r=tt(t.changedTouches);return e&(m|S)&&(s=yt(s.concat(r),"identifier",!0)),[s,r]}E($t,b,{handler:function(e){var s=Ie[e.type];if(s===x&&(this.started=!0),this.started){var r=we.call(this,e,s);s&(m|S)&&r[0].length-r[1].length==0&&(this.started=!1),this.callback(this.manager,s,{pointers:r[0],changedPointers:r[1],pointerType:ot,srcEvent:e})}}});var ke={touchstart:x,touchmove:q,touchend:m,touchcancel:S},_e="touchstart touchmove touchend touchcancel";function St(){this.evTarget=_e,this.targetIds={},b.apply(this,arguments)}function be(t,e){var s=tt(t.touches),r=this.targetIds;if(e&(x|q)&&1===s.length)return r[s[0].identifier]=!0,[s,s];var h,u,d=tt(t.changedTouches),T=[],P=this.target;if(u=s.filter(function(I){return Tt(I.target,P)}),e===x)for(h=0;h<u.length;)r[u[h].identifier]=!0,h++;for(h=0;h<d.length;)r[d[h].identifier]&&T.push(d[h]),e&(m|S)&&delete r[d[h].identifier],h++;return T.length?[yt(u.concat(T),"identifier",!0),T]:void 0}E(St,b,{handler:function(e){var s=ke[e.type],r=be.call(this,e,s);r&&this.callback(this.manager,s,{pointers:r[0],changedPointers:r[1],pointerType:ot,srcEvent:e})}});var De=2500,jt=25;function Mt(){b.apply(this,arguments);var t=H(this.handler,this);this.touch=new St(this.manager,t),this.mouse=new It(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function Ce(t,e){t&x?(this.primaryTouch=e.changedPointers[0].identifier,Kt.call(this,e)):t&(m|S)&&Kt.call(this,e)}function Kt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var s={x:e.clientX,y:e.clientY};this.lastTouches.push(s);var r=this.lastTouches;setTimeout(function(){var u=r.indexOf(s);u>-1&&r.splice(u,1)},De)}}function Re(t){for(var e=t.srcEvent.clientX,s=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var h=this.lastTouches[r],u=Math.abs(e-h.x),d=Math.abs(s-h.y);if(u<=jt&&d<=jt)return!0}return!1}E(Mt,b,{handler:function(e,s,r){var u=r.pointerType==Rt;if(!(u&&r.sourceCapabilities&&r.sourceCapabilities.firesTouchEvents)){if(r.pointerType==ot)Ce.call(this,s,r);else if(u&&Re.call(this,r))return;this.callback(e,s,r)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var te=et(pt.style,"touchAction"),ee=te!==a,ie="compute",Lt="manipulation",V="none",ut="pan-x",ft="pan-y",Ot=function Ae(){if(!ee)return!1;var t={},e=v.CSS&&v.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(s){t[s]=!e||v.CSS.supports("touch-action",s)}),t}();function Nt(t,e){this.manager=t,this.set(e)}Nt.prototype={set:function(t){t==ie&&(t=this.compute()),ee&&this.manager.element.style&&Ot[t]&&(this.manager.element.style[te]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return _(this.manager.recognizers,function(e){l(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function ze(t){if(L(t,V))return V;var e=L(t,ut),s=L(t,ft);return e&&s?V:e||s?e?ut:ft:L(t,Lt)?Lt:"auto"}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,s=t.offsetDirection;if(!this.manager.session.prevented){var r=this.actions,h=L(r,V)&&!Ot[V],u=L(r,ft)&&!Ot[ft],d=L(r,ut)&&!Ot[ut];if(h&&1===t.pointers.length&&t.distance<2&&t.deltaTime<250)return;return d&&u||!(h||u&&s&R||d&&s&B)?void 0:this.preventSrc(e)}e.preventDefault()},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var wt=1,D=2,it=4,Z=8,U=Z,dt=16,z=32;function W(t){this.options=w({},this.defaults,t||{}),this.id=function n(){return c++}(),this.manager=null,this.options.enable=vt(this.options.enable,!0),this.state=wt,this.simultaneous={},this.requireFail=[]}function ne(t){return t&dt?"cancel":t&Z?"end":t&it?"move":t&D?"start":""}function re(t){return t==ct?"down":t==lt?"up":t==at?"left":t==ht?"right":""}function kt(t,e){var s=e.manager;return s?s.get(t):t}function C(){W.apply(this,arguments)}function _t(){C.apply(this,arguments),this.pX=null,this.pY=null}function Ut(){C.apply(this,arguments)}function Wt(){W.apply(this,arguments),this._timer=null,this._input=null}function Gt(){C.apply(this,arguments)}function Ft(){C.apply(this,arguments)}function bt(){W.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Q(t,e){return(e=e||{}).recognizers=vt(e.recognizers,Q.defaults.preset),new Ht(t,e)}function Ht(t,e){this.options=w({},Q.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=function ue(t){return new(t.options.inputClass||(N?At:Ct?St:g?Mt:It))(t,fe)}(this),this.touchAction=new Nt(this,this.options.touchAction),ae(this,!0),_(this.options.recognizers,function(s){var r=this.add(new s[0](s[1]));s[2]&&r.recognizeWith(s[2]),s[3]&&r.requireFailure(s[3])},this)}function ae(t,e){var r,s=t.element;s.style&&(_(t.options.cssProps,function(h,u){r=et(s.style,u),e?(t.oldCssProps[r]=s.style[r],s.style[r]=h):s.style[r]=t.oldCssProps[r]||""}),e||(t.oldCssProps={}))}W.prototype={defaults:{},set:function(t){return w(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(F(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=kt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return F(t,"dropRecognizeWith",this)||(t=kt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(F(t,"requireFailure",this))return this;var e=this.requireFail;return-1===Y(e,t=kt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(F(t,"dropRequireFailure",this))return this;t=kt(t,this);var e=Y(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,s=this.state;function r(h){e.manager.emit(h,t)}s<Z&&r(e.options.event+ne(s)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),s>=Z&&r(e.options.event+ne(s))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=z},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(z|wt)))return!1;t++}return!0},recognize:function(t){var e=w({},t);if(!l(this.options.enable,[this,e]))return this.reset(),void(this.state=z);this.state&(U|dt|z)&&(this.state=wt),this.state=this.process(e),this.state&(D|it|Z|dt)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},E(C,W,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,s=t.eventType,r=e&(D|it),h=this.attrTest(t);return r&&(s&S||!h)?e|dt:r||h?s&m?e|Z:e&D?e|it:D:z}}),E(_t,C,{defaults:{event:"pan",threshold:10,pointers:1,direction:Yt},getTouchAction:function(){var t=this.options.direction,e=[];return t&R&&e.push(ft),t&B&&e.push(ut),e},directionTest:function(t){var e=this.options,s=!0,r=t.distance,h=t.direction,u=t.deltaX,d=t.deltaY;return h&e.direction||(e.direction&R?(h=0===u?Pt:u<0?at:ht,s=u!=this.pX,r=Math.abs(t.deltaX)):(h=0===d?Pt:d<0?lt:ct,s=d!=this.pY,r=Math.abs(t.deltaY))),t.direction=h,s&&r>e.threshold&&h&e.direction},attrTest:function(t){return C.prototype.attrTest.call(this,t)&&(this.state&D||!(this.state&D)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=re(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),E(Ut,C,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[V]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&D)},emit:function(t){1!==t.scale&&(t.additionalEvent=this.options.event+(t.scale<1?"in":"out")),this._super.emit.call(this,t)}}),E(Wt,W,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(t){var e=this.options,s=t.pointers.length===e.pointers,r=t.distance<e.threshold,h=t.deltaTime>e.time;if(this._input=t,!r||!s||t.eventType&(m|S)&&!h)this.reset();else if(t.eventType&x)this.reset(),this._timer=rt(function(){this.state=U,this.tryEmit()},e.time,this);else if(t.eventType&m)return U;return z},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===U&&(t&&t.eventType&m?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=G(),this.manager.emit(this.options.event,this._input)))}}),E(Gt,C,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[V]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&D)}}),E(Ft,C,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:R|B,pointers:1},getTouchAction:function(){return _t.prototype.getTouchAction.call(this)},attrTest:function(t){var s,e=this.options.direction;return e&(R|B)?s=t.overallVelocity:e&R?s=t.overallVelocityX:e&B&&(s=t.overallVelocityY),this._super.attrTest.call(this,t)&&e&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&M(s)>this.options.velocity&&t.eventType&m},emit:function(t){var e=re(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),E(bt,W,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Lt]},process:function(t){var e=this.options,s=t.pointers.length===e.pointers,r=t.distance<e.threshold,h=t.deltaTime<e.time;if(this.reset(),t.eventType&x&&0===this.count)return this.failTimeout();if(r&&h&&s){if(t.eventType!=m)return this.failTimeout();var u=!this.pTime||t.timeStamp-this.pTime<e.interval,d=!this.pCenter||xt(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,d&&u?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=rt(function(){this.state=U,this.tryEmit()},e.interval,this),D):U}return z},failTimeout:function(){return this._timer=rt(function(){this.state=z},this.options.interval,this),z},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==U&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Q.VERSION="2.0.7",Q.defaults={domEvents:!1,touchAction:ie,enable:!0,inputTarget:null,inputClass:null,preset:[[Gt,{enable:!1}],[Ut,{enable:!1},["rotate"]],[Ft,{direction:R}],[_t,{direction:R},["swipe"]],[bt],[bt,{event:"doubletap",taps:2},["tap"]],[Wt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Ht.prototype={set:function(t){return w(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var s,r=this.recognizers,h=e.curRecognizer;(!h||h&&h.state&U)&&(h=e.curRecognizer=null);for(var u=0;u<r.length;)s=r[u],2===e.stopped||h&&s!=h&&!s.canRecognizeWith(h)?s.reset():s.recognize(t),!h&&s.state&(D|it|Z)&&(h=e.curRecognizer=s),u++}},get:function(t){if(t instanceof W)return t;for(var e=this.recognizers,s=0;s<e.length;s++)if(e[s].options.event==t)return e[s];return null},add:function(t){if(F(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(F(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,s=Y(e,t);-1!==s&&(e.splice(s,1),this.touchAction.update())}return this},on:function(t,e){if(t!==a&&e!==a){var s=this.handlers;return _(K(t),function(r){s[r]=s[r]||[],s[r].push(e)}),this}},off:function(t,e){if(t!==a){var s=this.handlers;return _(K(t),function(r){e?s[r]&&s[r].splice(Y(s[r],e),1):delete s[r]}),this}},emit:function(t,e){this.options.domEvents&&function Le(t,e){var s=gt.createEvent("Event");s.initEvent(t,!0,!0),s.gesture=e,e.target.dispatchEvent(s)}(t,e);var s=this.handlers[t]&&this.handlers[t].slice();if(s&&s.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<s.length;)s[r](e),r++}},destroy:function(){this.element&&ae(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},w(Q,{INPUT_START:x,INPUT_MOVE:q,INPUT_END:m,INPUT_CANCEL:S,STATE_POSSIBLE:wt,STATE_BEGAN:D,STATE_CHANGED:it,STATE_ENDED:Z,STATE_RECOGNIZED:U,STATE_CANCELLED:dt,STATE_FAILED:z,DIRECTION_NONE:Pt,DIRECTION_LEFT:at,DIRECTION_RIGHT:ht,DIRECTION_UP:lt,DIRECTION_DOWN:ct,DIRECTION_HORIZONTAL:R,DIRECTION_VERTICAL:B,DIRECTION_ALL:Yt,Manager:Ht,Input:b,TouchAction:Nt,TouchInput:St,MouseInput:It,PointerEventInput:At,TouchMouseInput:Mt,SingleTouchInput:$t,Recognizer:W,AttrRecognizer:C,Tap:bt,Pan:_t,Swipe:Ft,Pinch:Ut,Rotate:Gt,Press:Wt,on:$,off:j,each:_,merge:mt,extend:J,assign:w,inherit:E,bindFn:H,prefixed:et}),(typeof v<"u"?v:typeof self<"u"?self:{}).Hammer=Q,(nt=function(){return Q}.call(st,O,st,Dt))!==a&&(Dt.exports=nt)}(window,document)}}]);