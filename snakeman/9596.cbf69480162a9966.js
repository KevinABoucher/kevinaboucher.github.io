(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9596],{9596:(Dt,K,C)=>{"use strict";C.r(K),C.d(K,{GamePage:()=>Tt});var B=C(6895),y=C(433),I=C(6114),c=(()=>{return(l=c||(c={}))[l.Up=0]="Up",l[l.Down=1]="Down",l[l.Left=2]="Left",l[l.Right=3]="Right",l[l.Stopped=4]="Stopped",c;var l})(),f=(()=>{return(l=f||(f={}))[l.WALL=0]="WALL",l[l.BISCUIT=1]="BISCUIT",l[l.EMPTY=2]="EMPTY",l[l.BLOCK=3]="BLOCK",l[l.PILL=4]="PILL",l[l.LEFT_DOOR=5]="LEFT_DOOR",l[l.RIGHT_DOOR=6]="RIGHT_DOOR",f;var l})();class ft{constructor(n,i){this.width=19,this.height=11,this.cellSize=30,this.winner=!1,this.step=0,this.level=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0],[0,4,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,4,0],[0,1,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,1,0],[0,1,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,1,0],[0,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,0],[0,0,0,0,1,0,2,2,2,2,2,2,2,0,1,0,0,0,0],[0,0,0,0,1,0,2,0,0,3,0,0,2,0,1,0,0,0,0],[5,2,2,2,1,1,2,0,3,3,3,0,2,1,1,2,2,2,6],[0,0,0,0,1,0,2,0,0,0,0,0,2,0,1,0,0,0,0],[0,0,0,0,1,0,2,2,2,2,2,2,2,0,1,0,0,0,0],[0,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0,0],[0,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0],[0,1,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,1,0],[0,4,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,4,0],[0,0,1,0,1,0,1,0,0,0,0,0,1,0,1,0,1,0,0],[0,1,1,1,1,0,1,1,1,0,1,1,1,0,1,1,1,1,0],[0,1,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],this.pillSize=10,this.pillBigger=!1,this.context=n,this.game=i}getElement(n,i){return this.level[i][n]}setElement(n,i,o){this.level[i][n]=o}update(){this.step++;let n=!0;for(let i=0;i<this.level.length;i++)for(let o=0;o<this.level[i].length;o++)(this.level[i][o]===f.BISCUIT||this.level[i][o]===f.PILL)&&(n=!1);this.winner=n}draw(){this.drawMaze()}drawMaze(){for(let n=0;n<this.level.length;n++)for(let i=0;i<this.level[n].length;i++)this.level[n][i]===f.BISCUIT?(this.drawBlock(n,i),this.drawBiscuit(n,i)):this.level[n][i]===f.PILL?(this.drawBlock(n,i),this.drawPill(n,i)):this.level[n][i]===f.BLOCK||this.level[n][i]===f.EMPTY?this.drawBlock(n,i):this.level[n][i]===f.WALL?this.drawWall(n,i):(this.level[n][i]===f.LEFT_DOOR||this.level[n][i]===f.RIGHT_DOOR)&&this.drawPortal(n,i)}drawBiscuit(n,i){this.context.fillStyle="whitesmoke",this.context.beginPath(),this.context.arc(30*i+15,30*n+15,5,0,2*Math.PI),this.context.fill()}drawPill(n,i){this.context.fillStyle="yellow",this.context.beginPath(),this.context.arc(30*i+15,30*n+15,this.pillSize,0,2*Math.PI),this.context.fill(),this.step%3==0&&(this.pillSize>10?this.pillBigger=!1:this.pillSize<6&&(this.pillBigger=!0),this.pillBigger?this.pillSize++:this.pillSize--)}drawBlock(n,i){this.context.fillStyle="black",this.context.fillRect(30*i,30*n,30,30)}drawWall(n,i){switch(this.game.settingsService.levelColor){case"green":this.context.fillStyle="green";break;case"pink":this.context.fillStyle="pink";break;case"blue":default:this.context.fillStyle="blue";break;case"purple":this.context.fillStyle="purple";break;case"yellow":this.context.fillStyle="yellow";break;case"orange":this.context.fillStyle="orange";break;case"red":this.context.fillStyle="red"}this.context.fillRect(30*i,30*n,30,30),this.context.fillStyle="black",this.context.fillRect(30*i+5,30*n+5,20,20),i>0&&this.level[n][i-1]===f.WALL&&(this.context.fillStyle="black",this.context.fillRect(30*i,30*n+5,5,20)),i<this.level[n].length-1&&this.level[n][i+1]===f.WALL&&(this.context.fillStyle="black",this.context.fillRect(30*i+25,30*n+5,5,20)),n>0&&this.level[n-1][i]===f.WALL&&(this.context.fillStyle="black",this.context.fillRect(30*i+5,30*n,20,5)),n<this.level.length-1&&this.level[n+1][i]===f.WALL&&(this.context.fillStyle="black",this.context.fillRect(30*i+5,30*n+25,20,5))}drawPortal(n,i){this.context.fillStyle="#B400FF",this.context.fillRect(30*i,30*n,30,30),this.context.fillStyle="black",this.context.fillRect(30*i+5,30*n+5,20,20)}}var m=(()=>{return(l=m||(m={}))[l.BISCUIT=0]="BISCUIT",l[l.PILL=1]="PILL",l[l.LEFT_DOOR=2]="LEFT_DOOR",l[l.RIGHT_DOOR=3]="RIGHT_DOOR",l[l.DEATH=4]="DEATH",l[l.FRUIT=5]="FRUIT",l[l.INTRO=6]="INTRO",m;var l})(),D=(()=>{return(l=D||(D={}))[l.INTRO=0]="INTRO",l[l.POWERUP=1]="POWERUP",l[l.DEATH=2]="DEATH",l[l.GAME_OVER=3]="GAME_OVER",D;var l})();class G{constructor(n){this.settingsService=n,this.playingIntro=!1,this.playingPowerup=!1,this.playingDeath=!1,this.synth=(new Tone.Synth).toDestination()}playSound(n){if(!this.settingsService.muteSound)switch(n){case m.LEFT_DOOR:case m.RIGHT_DOOR:case m.PILL:this.synth.triggerAttackRelease("C5","8n",Tone.now()+.09);break;case m.BISCUIT:this.synth.triggerAttackRelease("D3","64n",Tone.now()+.09);break;case m.FRUIT:this.playMelody(D.POWERUP);break;case m.DEATH:this.playMelody(D.DEATH);break;case m.INTRO:this.playMelody(D.INTRO)}}playMelody(n){if(this.settingsService.muteSound)return;let i=[];switch(n){case D.INTRO:this.playingIntro=!0,i=[{note:"E5",duration:"4n"},{note:"G5",duration:"4n"},{note:"A5",duration:"8n"},{note:"G5",duration:"8n"},{note:"F5",duration:"4n"},{note:"E5",duration:"4n"},{note:"C5",duration:"8n"},{note:"E5",duration:"8n"},{note:"D5",duration:"4n"},{note:"C5",duration:"4n"},{note:"G4",duration:"4n"},{note:"E5",duration:"4n"},{note:"G5",duration:"4n"},{note:"A5",duration:"8n"},{note:"G5",duration:"8n"},{note:"F5",duration:"4n"},{note:"E5",duration:"4n"},{note:"C5",duration:"8n"},{note:"E5",duration:"8n"},{note:"D5",duration:"4n"},{note:"C5",duration:"4n"},{note:"G4",duration:"4n"}];break;case D.POWERUP:this.playingPowerup=!0,i=[{note:"G5",duration:"8n"},{note:"D5",duration:"8n"},{note:"G4",duration:"8n"},{note:"B4",duration:"8n"},{note:"D5",duration:"4n"},{note:"B4",duration:"4n"}];break;case D.DEATH:this.playingDeath=!0,i=[{note:"C4",duration:"16n"},{note:"C3",duration:"8n"},{note:"C2",duration:"8n"},{note:"C1",duration:"4n"},{note:"C0",duration:"2n"}]}const o=(new Tone.Synth).toDestination();let p=0;i.forEach(z=>{const bt=Tone.now();o.triggerAttackRelease(z.note,z.duration,bt+.14*p),p++}),setTimeout(()=>{this.playingIntro=!1,this.playingPowerup=!1,this.playingDeath=!1},1e3*i.length*.14)}}class R{constructor(n,i){this.speed=10,this.dead=!0,this.blinking=!1,this.enemySize=6,this.enemyGrow=!0,this.context=n,this.maze=i.maze,this.snake=i.snake,this.game=i,this.direction=c.Right,this.position=this.getPositionOnScreen(9,10),this.reset()}draw(){this.dead?this.maze.step%200==0&&this.reset():this.blinking?(this.context.beginPath(),this.context.fillStyle="rgb(0, 255, 255)",this.context.arc(this.position.x+15,this.position.y+15,this.enemySize,0,2*Math.PI),this.context.fill(),this.maze.step%2==0&&(this.enemySize>10?this.enemyGrow=!1:this.enemySize<6&&(this.enemyGrow=!0),this.enemyGrow?this.enemySize++:this.enemySize--),this.maze.step%150==0&&(this.blinking=!1)):(this.context.beginPath(),this.context.fillStyle="red",this.context.arc(this.position.x+15,this.position.y+15,12,0,2*Math.PI),this.context.fill())}update(){this.dead||(this.move(),this.detectCollissionWithSnake(),this.detectCollissionWithDoor())}detectCollissionWithSnake(){const n=this.position;for(let i=0;i<this.snake.segments.length;i++){const o=this.snake.segments[i];o.x===n.x&&o.y===n.y&&(this.blinking?this.die():this.snake.die())}}detectCollissionWithDoor(){const n=this.position;let i=this.getPositionInMaze(n.x,n.y);if(this.maze.getElement(i.col,i.row)===f.LEFT_DOOR){let o=this.findGameElementPosition(f.RIGHT_DOOR);this.position.x=this.getPositionOnScreen(o.col-1,o.row).x}if(this.maze.getElement(i.col,i.row)===f.RIGHT_DOOR){let o=this.findGameElementPosition(f.LEFT_DOOR);this.position.x=this.getPositionOnScreen(o.col+1,o.row).x}}findGameElementPosition(n){for(let i=0;i<this.maze.level.length;i++)for(let o=0;o<this.maze.level[i].length;o++)if(this.maze.level[i][o]===n)return{col:o,row:i};return{col:9,row:12}}getPositionInMaze(n,i){let o=9,p=12;return(this.direction===c.Right||this.direction===c.Down)&&(o=Math.ceil(n/this.maze.cellSize),p=Math.ceil(i/this.maze.cellSize)),(this.direction===c.Up||this.direction===c.Left)&&(o=Math.floor(n/this.maze.cellSize),p=Math.floor(i/this.maze.cellSize)),{col:o,row:p}}getPositionOnScreen(n,i){return{x:n*this.maze.cellSize,y:i*this.maze.cellSize}}move(){const n=this.position;let i;switch(this.direction){case c.Up:i=this.getPositionInMaze(n.x,n.y-this.speed),this.detectWallCollision(i.col,i.row)?this.setRandomDirection():this.position.y=n.y-this.speed;break;case c.Down:i=this.getPositionInMaze(n.x,n.y+this.speed),this.detectWallCollision(i.col,i.row)?this.setRandomDirection():this.position.y=n.y+this.speed;break;case c.Left:i=this.getPositionInMaze(n.x-this.speed,n.y),this.detectWallCollision(i.col,i.row)?this.setRandomDirection():this.position.x=n.x-this.speed;break;case c.Right:i=this.getPositionInMaze(n.x+this.speed,n.y),this.detectWallCollision(i.col,i.row)?this.setRandomDirection():this.position.x=n.x+this.speed}this.maze.step%20==0&&this.setRandomDirection(),this.maze.step%30==0&&this.updateDirection()}updateDirection(){let n=this.snake.segments[0];if(!n)return;const i=n.x-this.position.x,o=n.y-this.position.y;Math.sqrt(i*i+o*o),this.direction=this.blinking?i>0&&Math.abs(i)>Math.abs(o)?c.Right:i<0&&Math.abs(i)>Math.abs(o)?c.Left:o>0?c.Down:c.Up:i<0&&Math.abs(i)>Math.abs(o)?c.Right:i>0&&Math.abs(i)>Math.abs(o)?c.Left:o<0?c.Down:c.Up}setRandomDirection(){switch(Math.floor(4*Math.random())){case 0:this.direction=c.Up;break;case 1:this.direction=c.Down;break;case 2:this.direction=c.Left;break;case 3:this.direction=c.Right}}detectWallCollision(n,i){switch(this.direction){case c.Up:case c.Down:case c.Left:case c.Right:if(this.maze.getElement(n,i)===f.WALL)return!0}return!1}die(){this.game.sound.playSound(m.DEATH),this.dead=!0,this.game.score=this.game.score+20}reset(){this.blinking=!1,this.dead=!1,this.position=this.getPositionOnScreen(9,10)}}class dt{constructor(n,i){this.segments=[],this.speed=10,this.dead=!0,this.color=0,this.particles=[],this.context=n,this.maze=i.maze,this.game=i,this.direction=c.Stopped,this.nextDirection=c.Stopped,this.reset()}draw(){if(0!==this.segments.length)for(let n=this.segments.length-1;n>=0;n--){const i=this.segments[n];if(this.context.beginPath(),0===n)switch(this.game.settingsService.snakeColor){case"red":this.context.fillStyle="red";break;case"blue":default:this.context.fillStyle="blue";break;case"green":this.context.fillStyle="darkgreen";break;case"yellow":this.context.fillStyle="yellow";break;case"purple":this.context.fillStyle="purple";break;case"orange":this.context.fillStyle="orange";break;case"pink":this.context.fillStyle="pink"}else if(this.game.enemy.blinking)this.color+=1,this.color>255&&(this.color=0),this.context.fillStyle=`hsl(${this.color}, 100%, 50%)`;else switch(this.game.settingsService.snakeColor){case"red":this.context.fillStyle="rgba(255, 0, 0, 0.8)";break;case"blue":this.context.fillStyle="rgba(0, 0, 255, 0.5)";break;case"green":this.context.fillStyle="rgba(0, 128, 0, 0.5)";break;case"yellow":this.context.fillStyle="rgba(255, 255, 0, 0.5)";break;case"purple":this.context.fillStyle="rgba(128, 0, 128, 0.5)";break;case"orange":this.context.fillStyle="rgba(255, 165, 0, 0.5)";break;case"pink":this.context.fillStyle="rgba(255, 192, 203, 0.5)";break;default:this.context.fillStyle="rgb(203, 195, 227)"}this.context.arc(i.x+15,i.y+15,10,0,2*Math.PI),this.context.fill()}this.drawParticles()}createParticles(){this.particles=[];for(let n=0;n<25;n++)this.particles.push({x:this.segments[0].x,y:this.segments[0].y,size:8*Math.random()+2,speedX:5*Math.random()*2-5,speedY:5*Math.random()*2-5,color:`rgb(${255*Math.random()}, ${255*Math.random()}, ${255*Math.random()})`})}drawParticles(){if(this.game.enemy.blinking)for(let n=0;n<this.particles.length;n++){const i=this.particles[n];this.context.fillStyle=i.color,this.context.fillRect(i.x,i.y,i.size,i.size),i.x+=i.speedX,i.y+=i.speedY}}update(){0!==this.segments.length&&!1===this.game.sound.playingIntro&&!1===this.game.sound.playingDeath&&!1===this.game.sound.playingPowerup&&(this.move(),this.detectCollissionWithBiscuit(),this.detectCollissionWithPill(),this.detectCollissionWithTail(),this.detectCollissionWithDoor())}detectCollissionWithTail(){if(!this.game.enemy.blinking){const n=this.segments[0];this.segments.length>2&&this.segments.filter(i=>i.x===n.x&&i.y===n.y).length>1&&this.die()}}detectCollissionWithDoor(){const n=this.segments[0];let i=this.getPositionInMaze(this.direction,n.x,n.y);if(this.maze.getElement(i.col,i.row)===f.LEFT_DOOR){this.game.sound.playSound(m.LEFT_DOOR);let o=this.findGameElementPositionInMaze(f.RIGHT_DOOR);this.segments[0].x=this.getPositionOnScreen(o.col-1,o.row).x}if(this.maze.getElement(i.col,i.row)===f.RIGHT_DOOR){this.game.sound.playSound(m.RIGHT_DOOR);let o=this.findGameElementPositionInMaze(f.LEFT_DOOR);this.segments[0].x=this.getPositionOnScreen(o.col+1,o.row).x}}findGameElementPositionInMaze(n){for(let i=0;i<this.maze.level.length;i++)for(let o=0;o<this.maze.level[i].length;o++)if(this.maze.level[i][o]===n)return{col:o,row:i};return{col:9,row:12}}detectCollissionWithBiscuit(){const n=this.segments[0];let i=this.getPositionInMaze(this.direction,n.x,n.y);this.maze.getElement(i.col,i.row)===f.BISCUIT&&(this.game.sound.playSound(m.BISCUIT),this.game.score++,this.maze.setElement(i.col,i.row,f.EMPTY),this.grow())}detectCollissionWithPill(){const n=this.segments[0];let i=this.getPositionInMaze(this.direction,n.x,n.y);this.maze.getElement(i.col,i.row)===f.PILL&&(this.game.sound.playSound(m.PILL),this.game.score=this.game.score+10,this.maze.setElement(i.col,i.row,f.EMPTY),this.shrink(),this.createParticles(),this.game.enemy.blinking=!0,this.game.enemy2.blinking=!0,this.maze.step=0)}getPositionInMaze(n,i,o){let p=9,z=12;return 0!==this.segments.length?((n===c.Right||n===c.Down)&&(p=Math.ceil(i/this.maze.cellSize),z=Math.ceil(o/this.maze.cellSize)),(n===c.Up||n===c.Left)&&(p=Math.floor(i/this.maze.cellSize),z=Math.floor(o/this.maze.cellSize)),{col:p,row:z}):{col:p,row:z}}getPositionOnScreen(n,i){return 0!==this.segments.length?{x:n*this.maze.cellSize,y:i*this.maze.cellSize}:{x:9,y:12}}move(){const n=this.segments[0];let i,o;switch(this.nextDirection){case c.Up:i=this.getPositionInMaze(this.nextDirection,n.x,n.y-this.speed),this.detectWallCollision(i.col,i.row)||(this.direction=c.Up);break;case c.Down:i=this.getPositionInMaze(this.nextDirection,n.x,n.y+this.speed),this.detectWallCollision(i.col,i.row)||(this.direction=c.Down);break;case c.Left:i=this.getPositionInMaze(this.nextDirection,n.x-this.speed,n.y),this.detectWallCollision(i.col,i.row)||(this.direction=c.Left);break;case c.Right:i=this.getPositionInMaze(this.nextDirection,n.x+this.speed,n.y),this.detectWallCollision(i.col,i.row)||(this.direction=c.Right)}switch(this.direction){case c.Up:i=this.getPositionInMaze(this.direction,n.x,n.y-this.speed),this.detectWallCollision(i.col,i.row)||(o=this.getPositionOnScreen(i.col,i.row),this.segments.unshift({x:o.x,y:n.y-this.speed}),this.segments.pop());break;case c.Down:i=this.getPositionInMaze(this.direction,n.x,n.y+this.speed),this.detectWallCollision(i.col,i.row)||(o=this.getPositionOnScreen(i.col,i.row),this.segments.unshift({x:o.x,y:n.y+this.speed}),this.segments.pop());break;case c.Left:i=this.getPositionInMaze(this.direction,n.x-this.speed,n.y),this.detectWallCollision(i.col,i.row)||(o=this.getPositionOnScreen(i.col,i.row),this.segments.unshift({x:n.x-this.speed,y:o.y}),this.segments.pop());break;case c.Right:i=this.getPositionInMaze(this.direction,n.x+this.speed,n.y),this.detectWallCollision(i.col,i.row)||(o=this.getPositionOnScreen(i.col,i.row),this.segments.unshift({x:n.x+this.speed,y:o.y}),this.segments.pop())}}detectWallCollision(n,i){return this.maze.getElement(n,i)===f.WALL}grow(){this.segments.push(this.segments[this.segments.length-1])}shrink(){this.segments=this.segments.slice(0,3)}die(){this.dead=!0,this.game.lives--,this.reset()}reset(){this.dead=!1,this.segments=[],this.segments.push({x:9*this.maze.cellSize,y:16*this.maze.cellSize}),this.game.sound.playSound(m.INTRO)}}var S=C(5386);class pt{constructor(n,i){this.speed=10,this.score=0,this.dead=!0,this.context=n,this.maze=i.maze,this.snake=i.snake,this.game=i,this.direction=c.Right,this.position=this.getPositionOnScreen(0,10),this.reset()}draw(){this.dead||(this.context.font="30px Arial",this.context.fillText(this.game.levels[this.game.level-1%this.game.levels.length],this.position.x,this.position.y+30))}update(){this.dead||(this.move(),this.detectCollissionWithSnake(),this.detectCollissionWithDoor())}detectCollissionWithSnake(){const n=this.position;for(let i=0;i<this.snake.segments.length;i++){const o=this.snake.segments[i];o.x===n.x&&o.y===n.y&&this.die()}}detectCollissionWithDoor(){const n=this.position;let i=this.getPositionInMaze(n.x,n.y);if(this.maze.getElement(i.col,i.row)===f.LEFT_DOOR){let o=this.findGameElementPosition(f.RIGHT_DOOR);this.position.x=this.getPositionOnScreen(o.col-1,o.row).x}if(this.maze.getElement(i.col,i.row)===f.RIGHT_DOOR){let o=this.findGameElementPosition(f.LEFT_DOOR);this.position.x=this.getPositionOnScreen(o.col+1,o.row).x}}findGameElementPosition(n){for(let i=0;i<this.maze.level.length;i++)for(let o=0;o<this.maze.level[i].length;o++)if(this.maze.level[i][o]===n)return{col:o,row:i};return{col:9,row:12}}getPositionInMaze(n,i){let o=9,p=12;return(this.direction===c.Right||this.direction===c.Down)&&(o=Math.ceil(n/this.maze.cellSize),p=Math.ceil(i/this.maze.cellSize)),(this.direction===c.Up||this.direction===c.Left)&&(o=Math.floor(n/this.maze.cellSize),p=Math.floor(i/this.maze.cellSize)),{col:o,row:p}}getPositionOnScreen(n,i){return{x:n*this.maze.cellSize,y:i*this.maze.cellSize}}move(){const n=this.position;let i;switch(this.direction){case c.Up:i=this.getPositionInMaze(n.x,n.y-this.speed),this.detectWallCollision(i.col,i.row)?this.setRandomDirection():this.position.y=n.y-this.speed;break;case c.Down:i=this.getPositionInMaze(n.x,n.y+this.speed),this.detectWallCollision(i.col,i.row)?this.setRandomDirection():this.position.y=n.y+this.speed;break;case c.Left:i=this.getPositionInMaze(n.x-this.speed,n.y),this.detectWallCollision(i.col,i.row)?this.setRandomDirection():this.position.x=n.x-this.speed;break;case c.Right:i=this.getPositionInMaze(n.x+this.speed,n.y),this.detectWallCollision(i.col,i.row)?this.setRandomDirection():this.position.x=n.x+this.speed}this.maze.step%20==0&&this.setRandomDirection(),this.maze.step%30==0&&this.updateDirection()}updateDirection(){let n=this.snake.segments[0];if(!n)return;const i=n.x-this.position.x,o=n.y-this.position.y;Math.sqrt(i*i+o*o),this.direction=i<0&&Math.abs(i)>Math.abs(o)?c.Right:i>0&&Math.abs(i)>Math.abs(o)?c.Left:o<0?c.Down:c.Up}setRandomDirection(){switch(Math.floor(4*Math.random())){case 0:this.direction=c.Up;break;case 1:this.direction=c.Down;break;case 2:this.direction=c.Left;break;case 3:this.direction=c.Right}}detectWallCollision(n,i){switch(this.direction){case c.Up:case c.Down:case c.Left:case c.Right:if(this.maze.getElement(n,i)===f.WALL)return!0}return!1}die(){this.game.sound.playSound(m.FRUIT),this.game.score=this.game.score+50*this.game.level,this.dead=!0}reset(){this.dead=!1,this.position=this.getPositionOnScreen(0,10)}}var gt=C(2598),a=C(8256),it=C(452);const st=["canvas"];function mt(l,n){1&l&&(a.TgZ(0,"span"),a._uU(1,"\u{1f40d}"),a.qZA())}function V(l,n){1&l&&(a.TgZ(0,"span"),a._uU(1,"\u{1f40d}"),a.qZA())}function J(l,n){1&l&&(a.TgZ(0,"span"),a._uU(1,"\u{1f40d}"),a.qZA())}function vt(l,n){1&l&&(a.TgZ(0,"div",19),a._uU(1,"Game Over"),a.qZA())}function N(l,n){1&l&&(a.TgZ(0,"div",20),a._uU(1,"You Win!"),a.qZA())}function Q(l,n){1&l&&(a.TgZ(0,"div",20),a._uU(1,"Get Ready!"),a.qZA())}function H(l,n){1&l&&(a.TgZ(0,"div",20),a._uU(1,"Bonus!"),a.qZA())}function $(l,n){1&l&&(a.TgZ(0,"div",21),a._uU(1,"PAUSED"),a.qZA())}let Tt=(()=>{class l{constructor(i,o){this.router=i,this.settingsService=o,this.title="SnakeMan",this.score=0,this.highScore=parseInt(localStorage.getItem("snakeman-highscore")||"0"),this.paused=!1,this.gameOver=!1,this.winner=!1,this.lives=3,this.levels=["\u{1f352}","\u{1f353}","\u{1f34a}","\u{1f34e}","\u{1f347}","\u{1f351}","\u{1f349}","\u{1f34c}","\u{1f968}","\u{1f511}"],this.level=1,this.debugString="",this.showSettings=!1,this.router.events.subscribe(p=>{p instanceof gt.OD&&"/game"!==p.url&&(clearInterval(this.timer),this.timer=null,this.paused=!0)}),this.sound=new G(this.settingsService)}ngAfterViewInit(){var i;this.context=null===(i=this.canvas)||void 0===i?void 0:i.nativeElement.getContext("2d"),this.context&&(this.startGame(),this.setupKeyboardEvents())}startGame(){this.paused?this.pauseGame():this.context&&(this.maze=new ft(this.context,this),this.snake=new dt(this.context,this),this.enemy=new R(this.context,this),this.enemy2=new R(this.context,this),this.fruit=new pt(this.context,this),this.hideText(),this.timer&&clearInterval(this.timer),this.timer=setInterval(()=>{this.update(),this.draw()},60))}hideText(){this.paused=!1,this.gameOver=!1,this.winner=!1}startStopTimer(){this.timer?(clearInterval(this.timer),this.timer=null):this.timer=setInterval(()=>{this.draw(),this.update()},60)}pauseGame(){this.startStopTimer(),this.paused=!this.paused}draw(){this.maze.draw(),this.snake.draw(),this.enemy.draw(),this.enemy2.draw(),this.fruit.draw()}update(){this.snake.update(),this.maze.update(),this.enemy.update(),this.enemy2.update(),this.fruit.update(),this.lives<1&&(this.gameOver=!0,this.level=1,this.recordHighScore(),this.startStopTimer()),this.maze.winner&&(this.level++,this.startGame())}recordHighScore(){this.score>this.highScore&&(this.highScore=this.score,localStorage.setItem("snakeman-highscore",this.score.toString()))}setupKeyboardEvents(){document.addEventListener("keydown",o=>{switch(o.key){case"ArrowUp":case"w":this.snake.nextDirection=c.Up;break;case"ArrowDown":case"s":this.snake.nextDirection=c.Down;break;case"ArrowLeft":case"a":this.snake.nextDirection=c.Left;break;case"ArrowRight":case"d":this.snake.nextDirection=c.Right;break;case"p":this.pauseGame()}});let i=document.getElementById("pad");this.hammer=new S.Manager(i),this.hammer.add(new S.Swipe({direction:S.DIRECTION_ALL,threshold:3,velocity:.2})),this.hammer.on("swipeleft",()=>{this.snake.nextDirection=c.Left}),this.hammer.on("swiperight",()=>{this.snake.nextDirection=c.Right}),this.hammer.on("swipeup",()=>{this.snake.nextDirection=c.Up}),this.hammer.on("swipedown",()=>{this.snake.nextDirection=c.Down})}settings(){this.showSettings=!this.showSettings}}return l.\u0275fac=function(i){return new(i||l)(a.Y36(gt.F0),a.Y36(it.g))},l.\u0275cmp=a.Xpm({type:l,selectors:[["app-game"]],viewQuery:function(i,o){if(1&i&&a.Gf(st,7),2&i){let p;a.iGM(p=a.CRH())&&(o.canvas=p.first)}},standalone:!0,features:[a.jDz],decls:42,vars:14,consts:[[3,"translucent"],["slot","start"],[1,"title"],["id","pad",3,"fullscreen"],[1,"score"],[1,"left"],["size","auto",1,"left"],[1,"right"],[3,"click"],["name","play-outline"],["name","pause-outline"],["size","auto"],["width","570","height","660",2,"border","1px solid #d3d3d3"],["canvas",""],[4,"ngIf"],["size","auto",1,"center"],["class","red-text",4,"ngIf"],["class","green-text",4,"ngIf"],["class","white-text",4,"ngIf"],[1,"red-text"],[1,"green-text"],[1,"white-text"]],template:function(i,o){1&i&&(a.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),a._UZ(3,"ion-menu-button"),a.qZA(),a.TgZ(4,"ion-title",2),a._uU(5,"SnakeMan"),a.qZA()()(),a.TgZ(6,"ion-content",3)(7,"ion-grid")(8,"ion-row",4)(9,"ion-col",5),a._uU(10,"SCORE"),a._UZ(11,"br"),a._uU(12),a.qZA(),a.TgZ(13,"ion-col",6),a._uU(14,"HIGH SCORE"),a._UZ(15,"br"),a._uU(16),a.qZA(),a.TgZ(17,"ion-col",7)(18,"button",8),a.NdJ("click",function(){return o.score=0,o.level=1,o.lives=3,o.startGame()}),a._UZ(19,"ion-icon",9),a.qZA(),a.TgZ(20,"button",8),a.NdJ("click",function(){return o.pauseGame()}),a._UZ(21,"ion-icon",10),a.qZA()()(),a.TgZ(22,"ion-row",11)(23,"ion-col"),a._UZ(24,"canvas",12,13),a.qZA()(),a.TgZ(26,"ion-row")(27,"ion-col",5),a.YNc(28,mt,2,0,"span",14),a.YNc(29,V,2,0,"span",14),a.YNc(30,J,2,0,"span",14),a.qZA(),a.TgZ(31,"ion-col",15),a.YNc(32,vt,2,0,"div",16),a.YNc(33,N,2,0,"div",17),a.YNc(34,Q,2,0,"div",17),a.YNc(35,H,2,0,"div",17),a.YNc(36,$,2,0,"div",18),a.qZA(),a.TgZ(37,"ion-col",7)(38,"span"),a._uU(39),a.qZA(),a.TgZ(40,"span"),a._uU(41),a.qZA()()()()()),2&i&&(a.Q6J("translucent",!0),a.xp6(6),a.Q6J("fullscreen",!0),a.xp6(6),a.Oqu(o.score),a.xp6(4),a.Oqu(o.highScore),a.xp6(12),a.Q6J("ngIf",o.lives>=1),a.xp6(1),a.Q6J("ngIf",o.lives>=2),a.xp6(1),a.Q6J("ngIf",3===o.lives),a.xp6(2),a.Q6J("ngIf",o.gameOver),a.xp6(1),a.Q6J("ngIf",o.winner),a.xp6(1),a.Q6J("ngIf",o.sound.playingIntro&&!o.gameOver),a.xp6(1),a.Q6J("ngIf",o.sound.playingPowerup),a.xp6(1),a.Q6J("ngIf",o.paused),a.xp6(3),a.Oqu(o.levels[o.level-1%o.levels.length]),a.xp6(2),a.Oqu(o.level))},dependencies:[I.Pc,I.Sm,I.wI,I.W2,I.jY,I.Gu,I.gu,I.fG,I.Nd,I.wd,I.sr,B.ez,B.O5,y.u5],styles:["ion-grid[_ngcontent-%COMP%]{overflow-y:hidden;max-width:380px}canvas[_ngcontent-%COMP%]{width:100%;height:auto;max-width:570px;max-height:660px}.left[_ngcontent-%COMP%]{text-align:left}.center[_ngcontent-%COMP%]{text-align:center}.right[_ngcontent-%COMP%]{text-align:right}.title[_ngcontent-%COMP%]{font-size:28px;text-shadow:0 0 2px #00ff00,0 0 5px #00ff00,0 0 7px #00ff00,0 0 10px #00ff00,0 0 12px #00ff00}.white-text[_ngcontent-%COMP%]{color:#fff}.red-text[_ngcontent-%COMP%]{color:red}.green-text[_ngcontent-%COMP%]{color:green}button[_ngcontent-%COMP%]{font-size:26px;background-color:#000;color:#fff;border:1px solid white;border-radius:5px;padding:2px;margin-left:10px;width:44px;cursor:pointer}.score[_ngcontent-%COMP%]{font-size:18px;padding-top:5px;color:#fff}.lives[_ngcontent-%COMP%], .bonus[_ngcontent-%COMP%]{font-size:20px;padding-top:5px}.debug[_ngcontent-%COMP%]{font-size:20px}"]}),l})()},5386:(Dt,K,C)=>{var B;!function(y,I,c,f){"use strict";var S,ft=["","webkit","Moz","MS","ms","o"],m=I.createElement("div"),D="function",G=Math.round,R=Math.abs,tt=Date.now;function et(t,e,s){return setTimeout(it(t,s),e)}function L(t,e,s){return!!Array.isArray(t)&&(x(t,s[e],s),!0)}function x(t,e,s){var r;if(t)if(t.forEach)t.forEach(e,s);else if(t.length!==f)for(r=0;r<t.length;)e.call(s,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(s,t[r],r,t)}function dt(t,e,s){var r="DEPRECATED METHOD: "+e+"\n"+s+" AT \n";return function(){var h=new Error("get-stack-trace"),u=h&&h.stack?h.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",d=y.console&&(y.console.warn||y.console.log);return d&&d.call(y.console,r,u),t.apply(this,arguments)}}S="function"!=typeof Object.assign?function(e){if(e===f||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(e),r=1;r<arguments.length;r++){var h=arguments[r];if(h!==f&&null!==h)for(var u in h)h.hasOwnProperty(u)&&(s[u]=h[u])}return s}:Object.assign;var pt=dt(function(e,s,r){for(var h=Object.keys(s),u=0;u<h.length;)(!r||r&&e[h[u]]===f)&&(e[h[u]]=s[h[u]]),u++;return e},"extend","Use `assign`."),gt=dt(function(e,s){return pt(e,s,!0)},"merge","Use `assign`.");function a(t,e,s){var h,r=e.prototype;(h=t.prototype=Object.create(r)).constructor=t,h._super=r,s&&S(h,s)}function it(t,e){return function(){return t.apply(e,arguments)}}function st(t,e){return typeof t==D?t.apply(e&&e[0]||f,e):t}function mt(t,e){return t===f?e:t}function V(t,e,s){x(Q(e),function(r){t.addEventListener(r,s,!1)})}function J(t,e,s){x(Q(e),function(r){t.removeEventListener(r,s,!1)})}function vt(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function N(t,e){return t.indexOf(e)>-1}function Q(t){return t.trim().split(/\s+/g)}function H(t,e,s){if(t.indexOf&&!s)return t.indexOf(e);for(var r=0;r<t.length;){if(s&&t[r][s]==e||!s&&t[r]===e)return r;r++}return-1}function $(t){return Array.prototype.slice.call(t,0)}function Tt(t,e,s){for(var r=[],h=[],u=0;u<t.length;){var d=e?t[u][e]:t[u];H(h,d)<0&&r.push(t[u]),h[u]=d,u++}return s&&(r=e?r.sort(function(T,E){return T[e]>E[e]}):r.sort()),r}function l(t,e){for(var s,r,h=e[0].toUpperCase()+e.slice(1),u=0;u<ft.length;){if((r=(s=ft[u])?s+h:e)in t)return r;u++}return f}var n=1;function o(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||y}var z="ontouchstart"in y,bt=l(y,"PointerEvent")!==f,ae=z&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),nt="touch",Rt="mouse",ce=25,P=1,Y=2,g=4,O=8,yt=1,rt=2,ot=4,at=8,ht=16,k=rt|ot,Z=at|ht,Ft=k|Z,Yt=["x","y"],Pt=["clientX","clientY"];function _(t,e){var s=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(r){st(t.options.enable,[t])&&s.handler(r)},this.init()}function fe(t,e,s){var r=s.pointers.length,h=s.changedPointers.length,u=e&P&&r-h==0,d=e&(g|O)&&r-h==0;s.isFirst=!!u,s.isFinal=!!d,u&&(t.session={}),s.eventType=e,function de(t,e){var s=t.session,r=e.pointers,h=r.length;s.firstInput||(s.firstInput=Zt(e)),h>1&&!s.firstMultiple?s.firstMultiple=Zt(e):1===h&&(s.firstMultiple=!1);var u=s.firstInput,d=s.firstMultiple,v=d?d.center:u.center,T=e.center=qt(r);e.timeStamp=tt(),e.deltaTime=e.timeStamp-u.timeStamp,e.angle=zt(v,T),e.distance=Et(v,T),function pe(t,e){var s=e.center,r=t.offsetDelta||{},h=t.prevDelta||{},u=t.prevInput||{};(e.eventType===P||u.eventType===g)&&(h=t.prevDelta={x:u.deltaX||0,y:u.deltaY||0},r=t.offsetDelta={x:s.x,y:s.y}),e.deltaX=h.x+(s.x-r.x),e.deltaY=h.y+(s.y-r.y)}(s,e),e.offsetDirection=Bt(e.deltaX,e.deltaY);var E=Xt(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=E.x,e.overallVelocityY=E.y,e.overallVelocity=R(E.x)>R(E.y)?E.x:E.y,e.scale=d?function ve(t,e){return Et(e[0],e[1],Pt)/Et(t[0],t[1],Pt)}(d.pointers,r):1,e.rotation=d?function me(t,e){return zt(e[1],e[0],Pt)+zt(t[1],t[0],Pt)}(d.pointers,r):0,e.maxPointers=s.prevInput?e.pointers.length>s.prevInput.maxPointers?e.pointers.length:s.prevInput.maxPointers:e.pointers.length,function ge(t,e){var h,u,d,v,s=t.lastInterval||e,r=e.timeStamp-s.timeStamp;if(e.eventType!=O&&(r>ce||s.velocity===f)){var T=e.deltaX-s.deltaX,E=e.deltaY-s.deltaY,M=Xt(r,T,E);u=M.x,d=M.y,h=R(M.x)>R(M.y)?M.x:M.y,v=Bt(T,E),t.lastInterval=e}else h=s.velocity,u=s.velocityX,d=s.velocityY,v=s.direction;e.velocity=h,e.velocityX=u,e.velocityY=d,e.direction=v}(s,e);var M=t.element;vt(e.srcEvent.target,M)&&(M=e.srcEvent.target),e.target=M}(t,s),t.emit("hammer.input",s),t.recognize(s),t.session.prevInput=s}function Zt(t){for(var e=[],s=0;s<t.pointers.length;)e[s]={clientX:G(t.pointers[s].clientX),clientY:G(t.pointers[s].clientY)},s++;return{timeStamp:tt(),pointers:e,center:qt(e),deltaX:t.deltaX,deltaY:t.deltaY}}function qt(t){var e=t.length;if(1===e)return{x:G(t[0].clientX),y:G(t[0].clientY)};for(var s=0,r=0,h=0;h<e;)s+=t[h].clientX,r+=t[h].clientY,h++;return{x:G(s/e),y:G(r/e)}}function Xt(t,e,s){return{x:e/t||0,y:s/t||0}}function Bt(t,e){return t===e?yt:R(t)>=R(e)?t<0?rt:ot:e<0?at:ht}function Et(t,e,s){s||(s=Yt);var r=e[s[0]]-t[s[0]],h=e[s[1]]-t[s[1]];return Math.sqrt(r*r+h*h)}function zt(t,e,s){return s||(s=Yt),180*Math.atan2(e[s[1]]-t[s[1]],e[s[0]]-t[s[0]])/Math.PI}_.prototype={handler:function(){},init:function(){this.evEl&&V(this.element,this.evEl,this.domHandler),this.evTarget&&V(this.target,this.evTarget,this.domHandler),this.evWin&&V(o(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&J(this.element,this.evEl,this.domHandler),this.evTarget&&J(this.target,this.evTarget,this.domHandler),this.evWin&&J(o(this.element),this.evWin,this.domHandler)}};var Te={mousedown:P,mousemove:Y,mouseup:g},ye="mousedown",Pe="mousemove mouseup";function It(){this.evEl=ye,this.evWin=Pe,this.pressed=!1,_.apply(this,arguments)}a(It,_,{handler:function(e){var s=Te[e.type];s&P&&0===e.button&&(this.pressed=!0),s&Y&&1!==e.which&&(s=g),this.pressed&&(s&g&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[e],changedPointers:[e],pointerType:Rt,srcEvent:e}))}});var Ee={pointerdown:P,pointermove:Y,pointerup:g,pointercancel:O,pointerout:O},Ie={2:nt,3:"pen",4:Rt,5:"kinect"},Vt="pointerdown",Jt="pointermove pointerup pointercancel";function kt(){this.evEl=Vt,this.evWin=Jt,_.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}y.MSPointerEvent&&!y.PointerEvent&&(Vt="MSPointerDown",Jt="MSPointerMove MSPointerUp MSPointerCancel"),a(kt,_,{handler:function(e){var s=this.store,r=!1,h=e.type.toLowerCase().replace("ms",""),u=Ee[h],d=Ie[e.pointerType]||e.pointerType,v=d==nt,T=H(s,e.pointerId,"pointerId");u&P&&(0===e.button||v)?T<0&&(s.push(e),T=s.length-1):u&(g|O)&&(r=!0),!(T<0)&&(s[T]=e,this.callback(this.manager,u,{pointers:s,changedPointers:[e],pointerType:d,srcEvent:e}),r&&s.splice(T,1))}});var xe={touchstart:P,touchmove:Y,touchend:g,touchcancel:O},Se="touchstart",Oe="touchstart touchmove touchend touchcancel";function Qt(){this.evTarget=Se,this.evWin=Oe,this.started=!1,_.apply(this,arguments)}function _e(t,e){var s=$(t.touches),r=$(t.changedTouches);return e&(g|O)&&(s=Tt(s.concat(r),"identifier",!0)),[s,r]}a(Qt,_,{handler:function(e){var s=xe[e.type];if(s===P&&(this.started=!0),this.started){var r=_e.call(this,e,s);s&(g|O)&&r[0].length-r[1].length==0&&(this.started=!1),this.callback(this.manager,s,{pointers:r[0],changedPointers:r[1],pointerType:nt,srcEvent:e})}}});var we={touchstart:P,touchmove:Y,touchend:g,touchcancel:O},Ce="touchstart touchmove touchend touchcancel";function xt(){this.evTarget=Ce,this.targetIds={},_.apply(this,arguments)}function De(t,e){var s=$(t.touches),r=this.targetIds;if(e&(P|Y)&&1===s.length)return r[s[0].identifier]=!0,[s,s];var h,u,d=$(t.changedTouches),v=[],T=this.target;if(u=s.filter(function(E){return vt(E.target,T)}),e===P)for(h=0;h<u.length;)r[u[h].identifier]=!0,h++;for(h=0;h<d.length;)r[d[h].identifier]&&v.push(d[h]),e&(g|O)&&delete r[d[h].identifier],h++;return v.length?[Tt(u.concat(v),"identifier",!0),v]:void 0}a(xt,_,{handler:function(e){var s=we[e.type],r=De.call(this,e,s);r&&this.callback(this.manager,s,{pointers:r[0],changedPointers:r[1],pointerType:nt,srcEvent:e})}});var be=2500,$t=25;function At(){_.apply(this,arguments);var t=it(this.handler,this);this.touch=new xt(this.manager,t),this.mouse=new It(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function Re(t,e){t&P?(this.primaryTouch=e.changedPointers[0].identifier,jt.call(this,e)):t&(g|O)&&jt.call(this,e)}function jt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var s={x:e.clientX,y:e.clientY};this.lastTouches.push(s);var r=this.lastTouches;setTimeout(function(){var u=r.indexOf(s);u>-1&&r.splice(u,1)},be)}}function ze(t){for(var e=t.srcEvent.clientX,s=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var h=this.lastTouches[r],u=Math.abs(e-h.x),d=Math.abs(s-h.y);if(u<=$t&&d<=$t)return!0}return!1}a(At,_,{handler:function(e,s,r){var u=r.pointerType==Rt;if(!(u&&r.sourceCapabilities&&r.sourceCapabilities.firesTouchEvents)){if(r.pointerType==nt)Re.call(this,s,r);else if(u&&ze.call(this,r))return;this.callback(e,s,r)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Kt=l(m.style,"touchAction"),te=Kt!==f,ee="compute",Mt="manipulation",q="none",lt="pan-x",ct="pan-y",St=function Ae(){if(!te)return!1;var t={},e=y.CSS&&y.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(s){t[s]=!e||y.CSS.supports("touch-action",s)}),t}();function Lt(t,e){this.manager=t,this.set(e)}Lt.prototype={set:function(t){t==ee&&(t=this.compute()),te&&this.manager.element.style&&St[t]&&(this.manager.element.style[Kt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return x(this.manager.recognizers,function(e){st(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function ke(t){if(N(t,q))return q;var e=N(t,lt),s=N(t,ct);return e&&s?q:e||s?e?lt:ct:N(t,Mt)?Mt:"auto"}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,s=t.offsetDirection;if(!this.manager.session.prevented){var r=this.actions,h=N(r,q)&&!St[q],u=N(r,ct)&&!St[ct],d=N(r,lt)&&!St[lt];if(h&&1===t.pointers.length&&t.distance<2&&t.deltaTime<250)return;return d&&u||!(h||u&&s&k||d&&s&Z)?void 0:this.preventSrc(e)}e.preventDefault()},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Ot=1,w=2,j=4,F=8,U=F,ut=16,A=32;function W(t){this.options=S({},this.defaults,t||{}),this.id=function i(){return n++}(),this.manager=null,this.options.enable=mt(this.options.enable,!0),this.state=Ot,this.simultaneous={},this.requireFail=[]}function se(t){return t&ut?"cancel":t&F?"end":t&j?"move":t&w?"start":""}function ne(t){return t==ht?"down":t==at?"up":t==rt?"left":t==ot?"right":""}function _t(t,e){var s=e.manager;return s?s.get(t):t}function b(){W.apply(this,arguments)}function wt(){b.apply(this,arguments),this.pX=null,this.pY=null}function Nt(){b.apply(this,arguments)}function Ut(){W.apply(this,arguments),this._timer=null,this._input=null}function Wt(){b.apply(this,arguments)}function Gt(){b.apply(this,arguments)}function Ct(){W.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function X(t,e){return(e=e||{}).recognizers=mt(e.recognizers,X.defaults.preset),new Ht(t,e)}function Ht(t,e){this.options=S({},X.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=function ue(t){return new(t.options.inputClass||(bt?kt:ae?xt:z?At:It))(t,fe)}(this),this.touchAction=new Lt(this,this.options.touchAction),oe(this,!0),x(this.options.recognizers,function(s){var r=this.add(new s[0](s[1]));s[2]&&r.recognizeWith(s[2]),s[3]&&r.requireFailure(s[3])},this)}function oe(t,e){var r,s=t.element;s.style&&(x(t.options.cssProps,function(h,u){r=l(s.style,u),e?(t.oldCssProps[r]=s.style[r],s.style[r]=h):s.style[r]=t.oldCssProps[r]||""}),e||(t.oldCssProps={}))}W.prototype={defaults:{},set:function(t){return S(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(L(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=_t(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return L(t,"dropRecognizeWith",this)||(t=_t(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(L(t,"requireFailure",this))return this;var e=this.requireFail;return-1===H(e,t=_t(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(L(t,"dropRequireFailure",this))return this;t=_t(t,this);var e=H(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,s=this.state;function r(h){e.manager.emit(h,t)}s<F&&r(e.options.event+se(s)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),s>=F&&r(e.options.event+se(s))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=A},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(A|Ot)))return!1;t++}return!0},recognize:function(t){var e=S({},t);if(!st(this.options.enable,[this,e]))return this.reset(),void(this.state=A);this.state&(U|ut|A)&&(this.state=Ot),this.state=this.process(e),this.state&(w|j|F|ut)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},a(b,W,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,s=t.eventType,r=e&(w|j),h=this.attrTest(t);return r&&(s&O||!h)?e|ut:r||h?s&g?e|F:e&w?e|j:w:A}}),a(wt,b,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ft},getTouchAction:function(){var t=this.options.direction,e=[];return t&k&&e.push(ct),t&Z&&e.push(lt),e},directionTest:function(t){var e=this.options,s=!0,r=t.distance,h=t.direction,u=t.deltaX,d=t.deltaY;return h&e.direction||(e.direction&k?(h=0===u?yt:u<0?rt:ot,s=u!=this.pX,r=Math.abs(t.deltaX)):(h=0===d?yt:d<0?at:ht,s=d!=this.pY,r=Math.abs(t.deltaY))),t.direction=h,s&&r>e.threshold&&h&e.direction},attrTest:function(t){return b.prototype.attrTest.call(this,t)&&(this.state&w||!(this.state&w)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=ne(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),a(Nt,b,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[q]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&w)},emit:function(t){1!==t.scale&&(t.additionalEvent=this.options.event+(t.scale<1?"in":"out")),this._super.emit.call(this,t)}}),a(Ut,W,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(t){var e=this.options,s=t.pointers.length===e.pointers,r=t.distance<e.threshold,h=t.deltaTime>e.time;if(this._input=t,!r||!s||t.eventType&(g|O)&&!h)this.reset();else if(t.eventType&P)this.reset(),this._timer=et(function(){this.state=U,this.tryEmit()},e.time,this);else if(t.eventType&g)return U;return A},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===U&&(t&&t.eventType&g?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=tt(),this.manager.emit(this.options.event,this._input)))}}),a(Wt,b,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[q]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&w)}}),a(Gt,b,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:k|Z,pointers:1},getTouchAction:function(){return wt.prototype.getTouchAction.call(this)},attrTest:function(t){var s,e=this.options.direction;return e&(k|Z)?s=t.overallVelocity:e&k?s=t.overallVelocityX:e&Z&&(s=t.overallVelocityY),this._super.attrTest.call(this,t)&&e&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&R(s)>this.options.velocity&&t.eventType&g},emit:function(t){var e=ne(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),a(Ct,W,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Mt]},process:function(t){var e=this.options,s=t.pointers.length===e.pointers,r=t.distance<e.threshold,h=t.deltaTime<e.time;if(this.reset(),t.eventType&P&&0===this.count)return this.failTimeout();if(r&&h&&s){if(t.eventType!=g)return this.failTimeout();var u=!this.pTime||t.timeStamp-this.pTime<e.interval,d=!this.pCenter||Et(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,d&&u?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=et(function(){this.state=U,this.tryEmit()},e.interval,this),w):U}return A},failTimeout:function(){return this._timer=et(function(){this.state=A},this.options.interval,this),A},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==U&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),X.VERSION="2.0.7",X.defaults={domEvents:!1,touchAction:ee,enable:!0,inputTarget:null,inputClass:null,preset:[[Wt,{enable:!1}],[Nt,{enable:!1},["rotate"]],[Gt,{direction:k}],[wt,{direction:k},["swipe"]],[Ct],[Ct,{event:"doubletap",taps:2},["tap"]],[Ut]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Ht.prototype={set:function(t){return S(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var s,r=this.recognizers,h=e.curRecognizer;(!h||h&&h.state&U)&&(h=e.curRecognizer=null);for(var u=0;u<r.length;)s=r[u],2===e.stopped||h&&s!=h&&!s.canRecognizeWith(h)?s.reset():s.recognize(t),!h&&s.state&(w|j|F)&&(h=e.curRecognizer=s),u++}},get:function(t){if(t instanceof W)return t;for(var e=this.recognizers,s=0;s<e.length;s++)if(e[s].options.event==t)return e[s];return null},add:function(t){if(L(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(L(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,s=H(e,t);-1!==s&&(e.splice(s,1),this.touchAction.update())}return this},on:function(t,e){if(t!==f&&e!==f){var s=this.handlers;return x(Q(t),function(r){s[r]=s[r]||[],s[r].push(e)}),this}},off:function(t,e){if(t!==f){var s=this.handlers;return x(Q(t),function(r){e?s[r]&&s[r].splice(H(s[r],e),1):delete s[r]}),this}},emit:function(t,e){this.options.domEvents&&function Le(t,e){var s=I.createEvent("Event");s.initEvent(t,!0,!0),s.gesture=e,e.target.dispatchEvent(s)}(t,e);var s=this.handlers[t]&&this.handlers[t].slice();if(s&&s.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<s.length;)s[r](e),r++}},destroy:function(){this.element&&oe(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},S(X,{INPUT_START:P,INPUT_MOVE:Y,INPUT_END:g,INPUT_CANCEL:O,STATE_POSSIBLE:Ot,STATE_BEGAN:w,STATE_CHANGED:j,STATE_ENDED:F,STATE_RECOGNIZED:U,STATE_CANCELLED:ut,STATE_FAILED:A,DIRECTION_NONE:yt,DIRECTION_LEFT:rt,DIRECTION_RIGHT:ot,DIRECTION_UP:at,DIRECTION_DOWN:ht,DIRECTION_HORIZONTAL:k,DIRECTION_VERTICAL:Z,DIRECTION_ALL:Ft,Manager:Ht,Input:_,TouchAction:Lt,TouchInput:xt,MouseInput:It,PointerEventInput:kt,TouchMouseInput:At,SingleTouchInput:Qt,Recognizer:W,AttrRecognizer:b,Tap:Ct,Pan:wt,Swipe:Gt,Pinch:Nt,Rotate:Wt,Press:Ut,on:V,off:J,each:x,merge:gt,extend:pt,assign:S,inherit:a,bindFn:it,prefixed:l}),(typeof y<"u"?y:typeof self<"u"?self:{}).Hammer=X,(B=function(){return X}.call(K,C,K,Dt))!==f&&(Dt.exports=B)}(window,document)}}]);